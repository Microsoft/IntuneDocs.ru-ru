---
title: "Руководство для разработчиков по пакету SDK для приложений Microsoft Intune для iOS | Microsoft Intune"
description: 
keywords: 
author: Msmbaldwin
manager: angrobe
ms.author: oydang
ms.date: 09/08/2016
ms.topic: article
ms.prod: 
ms.service: microsoft-intune
ms.technology: 
ms.assetid: 8e280d23-2a25-4a84-9bcb-210b30c63c0b
ms.reviewer: jeffgilb
ms.suite: ems
translationtype: Human Translation
ms.sourcegitcommit: 018faada59819938d443605a454465a38600c9a4
ms.openlocfilehash: f44d2a43c6717c9b3adde9ba49a54e014f4e3528


---

# <a name="microsoft-intune-app-sdk-for-ios-developer-guide"></a>Руководство по пакету SDK для приложений Intune для разработчиков под iOS

> [!NOTE]
> Вы можете сначала прочесть статью [Начало работы с пакетом SDK для приложений Intune](intune-app-sdk-get-started.md), в которой описана подготовка к интеграции на каждой поддерживаемой платформе.

## <a name="overview"></a>Обзор

Пакет SDK для приложений Microsoft Intune для iOS позволяет встроить политики защиты Intune в ваше приложение iOS. Приложение с поддержкой MAM интегрировано с пакетом SDK для приложений Intune и позволяет ИТ-администраторам развертывать политики для мобильного приложения во время активного управления им с помощью системы управления мобильными приложениями Intune.


## <a name="prerequisites"></a>Предварительные требования

* Потребуется компьютер под управлением Mac OS X 10.8.5 или более поздней версии с установленным набором инструментов XCode версии 5 или более поздней.

* См. статью [Условия лицензии пакета SDK для приложений Intune для iOS](https://github.com/msintuneappsdk/ms-intune-app-sdk-ios/blob/master/Microsoft%20License%20Terms%20Intune%20App%20SDK%20for%20iOS%20.pdf). Распечатать и сохранить копию условий лицензии для своих записей. Скачивая и используя пакет SDK для приложений Intune для iOS, вы соглашаетесь с этими условиями лицензии.  Если вы не согласны, не используйте это программное обеспечение.


## <a name="whats-in-the-sdk"></a>Состав пакета SDK

Пакет SDK для приложений Intune для iOS содержит статическую библиотеку, файлы ресурсов, заголовки API, PLIST-файл параметров отладки и средство конфигуратора. Мобильные приложения для большинства применяемых политик могут включать просто файлы ресурсов и статическую компоновку с библиотеками для большинства применения политики. Расширенные функции Intune MAM применяются через API-интерфейсы.

В этом руководстве рассматривается использование следующих компонентов пакета SDK для приложений Intune для iOS:

* **libIntuneMAM.a**: статическая библиотека пакета SDK для приложений Intune. Если приложение не использует расширения, свяжите эту библиотеку с проектом, чтобы включить приложение в систему управления мобильными приложениями Intune. Инструкции приведены в разделе "Создание приложения с помощью пакета SDK для приложений Intune".

* **IntuneMAM.framework**: платформа пакета SDK для приложений Intune. Свяжите эту платформу с проектом, чтобы включить приложение в систему управления мобильными приложениями Intune. Если приложение использует расширения, применяйте платформу вместо статической библиотеки, чтобы проект не создавал несколько копий статической библиотеки.

* **IntuneMAMResources.bundle**: набор ресурсов, на которых основан пакет SDK.

* **Заголовки**: предоставляет API пакета SDK для приложений Intune. При использовании API необходимо включить файл заголовков, содержащий этот API. Следующие файлы заголовков включают в себя вызовы функций API, необходимые для использования функциональных возможностей пакета SDK для приложений Intune.

    * IntuneMAMAsyncResult.h
    * IntuneMAMDataProtectionInfo.h
    * IntuneMAMDataProtectionManager.h
    * IntuneMAMFileProtectionInfo.h
    * IntuneMAMFileProtectionManager.h
    * IntuneMAMPolicyDelegate.h
    * IntuneMAMLogger.h


## <a name="how-the-intune-app-sdk-works"></a>Принцип работы пакета SDK для приложений Intune

Назначение пакета SDK для приложений Intune для iOS заключается в том, чтобы добавить возможности управления в приложения iOS с минимальными изменениями кода. Сокращение объема изменений кода уменьшает время выхода на рынок, одновременно гарантируя согласованность и стабильность работы мобильного приложения.

Приложение должно быть связано со статической библиотекой и включать в себя набор ресурсов. Файл MAMDebugSettings.plist является необязательным и может быть включен в пакет для имитации применяемых к приложению политик MAM, при этом развертывание приложения с помощью Microsoft Intune не требуется. Кроме того, в отладочных сборках политики в файле MAMDebugSettings.plist могут применяться посредством передачи этого файла в каталог "Documents" приложения через совместный доступ к файлам в iTunes.

## <a name="building-the-sdk-into-your-mobile-app"></a>Внедрение пакета SDK в мобильное приложение

Выполните следующие шаги, чтобы включить пакет SDK для приложений Intune:

1. **Вариант 1**. Выполните связывание с библиотекой `libIntuneMAM.a` следующим образом:

    Перетащите библиотеку `libIntuneMAM.a` в список "Linked Frameworks and Libraries" (Связанные платформы и библиотеки) цели проекта.

    ![Пакет SDK для приложений Intune для iOS — связанные платформы и библиотеки](../media/intune-app-sdk-ios-linked-frameworks-and-libraries.png)

    **Примечание**. Если вы планируете опубликовать приложение в магазине приложений, используйте ту версию `libIntuneMAM.a`, которая создана для окончательной, а не отладочной версии. Окончательная версия будет находиться в папке "release". Отладочная версия имеет подробные выходные данные, которые хорошо подходят для устранения проблем с пакетом SDK для приложений Intune.

    **Вариант 2**. Выполните связывание `IntuneMAM.framework` с проектом. Перетащите библиотеку `IntuneMAM.framework` в список "Linked Frameworks and Libraries" (Связанные платформы и библиотеки) цели проекта.

    **Примечание**. При использовании такой платформы вам необходимо вручную убрать архитектуры симулятора из универсальной платформы перед отправкой приложения в магазин. См. раздел "Отправка приложения в магазин".

2. Добавьте в проект следующие платформы iOS:
    * MessageUI.framework
    * Security.framework
    * MobileCoreServices.framework
    * SystemConfiguration.framework
    * libsqlite3.dylib
    * libc++.dylib
    * ImageIO.framework
    * LocalAuthentication.framework
    * AudioToolbox.framework

    **Примечание**. Если приложение предназначено для iOS 7, установите для атрибута "Состояние" в `LocalAuthentication.framework` значение "Дополнительно". Если атрибут "Состояние" не задан, приложение не запустится в iOS 7.

    **Примечание.**. Для Xcode 7 расширения `.dylib` изменились на `.tbd`.

3. Добавьте набор ресурсов `IntuneMAMResources.bundle` в проект, перетащив этот набор ресурсов в узел "Copy Bundle Resources" (Копирование ресурсов пакета) раздела "Build Phases" (Этапы сборки).
![Пакет SDK для приложений Intune для iOS — копирование ресурсов пакета](../media/intune-app-sdk-ios-copy-bundle-resources.png)

4. Добавьте `-force_load {PATH_TO_LIB}/libIntuneMAM.a` в любое из следующих расположений, заменив `{PATH_TO_LIB}` путем к пакету SDK для приложений Intune:
    * параметр конфигурации сборки `OTHER_LDFLAGS` проекта;
    * "Other Linker Flags" (Другие флаги компоновщика) в пользовательском интерфейсе.<br>

    **Примечание**. Чтобы найти `PATH_TO_LIB`, выберите файл `libIntuneMAM.a`, а затем пункт "Получить сведения" в меню "Файл". Скопируйте и вставьте сведения "Где" (путь) из раздела "Общие" окна "Сведения".

5. Если ваше мобильное приложение определяет главный Nib или Storyboard в своем Info.plist, удалите поля файла "Main Storyboard" или "Main Nib". Добавьте удаленные ранее значения Storyboard или Nib в новый словарь IntuneMAMSettings со следующими именами ключей, если применимо:
    * MainStoryboardFile
    * MainStoryboardFile~ipad
    * MainNibFile
    * MainNibFile~ipad

   **Примечание**. Если ваше мобильное приложение не определяет главный Nib или Storyboard в своем Info.plist, эти параметры являются **необязательными**.

    **Примечание**. Можно просмотреть Info.plist в необработанном формате (чтобы увидеть имена ключей), щелкнув правой кнопкой мыши в любом месте в основном тексте документа и изменив тип представления на "Show Raw Keys/Values" (Показать необработанные ключи/значения).

6. Включите общий доступ к цепочке ключей (если он еще не включен), щелкнув "Возможности" в каждой цели проекта и включив параметр "Keychain Sharing" (Общий доступ к цепочке ключей). Общий доступ к цепочке ключей требуется для перехода к следующему шагу.

    **Примечание**. Профиль подготовки должен поддерживать новые значения общего доступа к цепочке ключей. Группы доступа к цепочке ключей должны поддерживать подстановочный знак. Это можно проверить, открыв файл .mobileprovision в текстовом редакторе, найдя "keychain-access-groups" и убедившись в наличии подстановочного знака, например:
    ```xml
    <key>keychain-access-groups</key>
    <array>
    <string>YOURBUNDLESEEDID.*</string>
    </array>
    ```
7. После включения общего доступа к цепочке ключей выполните следующие действия для создания отдельной группы доступа, в которой будут храниться данные пакета SDK для приложений Intune. Группу доступа к цепочке ключей можно создать с помощью пользовательского интерфейса или с помощью файла прав:

    Создание группы доступа к цепочке ключей с помощью пользовательского интерфейса:

    * Если для мобильного приложения не определено ни одной группы доступа к цепочке ключей, добавьте идентификатор пакета приложения в качестве первой группы.
    * Добавьте группу общей цепочки ключей `com.microsoft.intune.mam`. Эта группа доступа используется пакетом SDK для приложений Intune для хранения данных.  
    * Добавьте `com.microsoft.adalcache` в свои существующие группы доступа.

    ![Пакет SDK для приложений Intune (iOS) — общий доступ к цепочке ключей](../media/intune-app-sdk-ios-keychain-sharing.png)

    Если для создания группы доступа к цепочке ключей вы используете файл прав, а не стандартный пользовательский интерфейс, необходимо добавить `$(AppIdentifierPrefix)` в начало этой группы доступа к цепочке ключей в файле прав. Пример.  
    * `$(AppIdentifierPrefix)com.microsoft.intune.mam`
    * `$(AppIdentifierPrefix)com.microsoft.adalcache`

    **Примечание**. Файл прав — это уникальный для вашего мобильного приложения XML-файл, который используется для задания специальных разрешений и возможностей в приложении iOS.

8. Если приложение определяет схемы URL-адресов в своем файле Info.plist, добавьте другую схему с суффиксом `-intunemam` для каждой схемы URL-адресов.

9. Для мобильных приложений, разрабатываемых для iOS 9+, необходимо включить каждый протокол, который передает ваше мобильное приложение, в `UIApplication canOpenURL` в массиве `LSApplicationQueriesSchemes` файла Info.plist приложения. Кроме того, для каждого из указанных протоколов следует добавить новый протокол, добавив к нему суффикс `-intunemam`. Следует также включить `http-intunemam`, `https-intunemam`и `ms-outlook-intunemam` в этот массив.

10. Если в файле прав приложения определены группы приложений, добавьте эти группы в словарь IntuneMAMSettings ключа `AppGroupIdentitifiers` в виде массива строк.

11. Свяжите мобильное приложений с библиотекой проверки подлинности Azure Directory (ADAL) Библиотека ADAL для Objective C доступна [на сайте Github](https://github.com/AzureAD/azure-activedirectory-library-for-objc).

    **Примечание**. Пакет SDK для приложений Intune был проверен на соответствие коду ветви брокера ADAL от 19.06.2015. Убедитесь, что связывание производится с последней или рабочей версией библиотеки ADAL.

12. Включите набор ресурсов `ADALiOSBundle.bundle` в проект, перетащив его в узел "Copy Bundle Resources" (Копирование ресурсов пакета) раздела "Build Phases" (Этапы сборки).

13. Используйте параметр компоновщика `-force_load PATH_TO_ADAL_LIBRARY` при связывании с библиотекой.

    Добавьте `-force_load {PATH_TO_LIB}/libADALiOS.a` OTHER_LDFLAGS в параметр конфигурации сборки `OTHER_LDFLAGS` проекта или в "Other Linker Flags" (Другие флаги компоновщика) в пользовательском интерфейсе. `PATH_TO_LIB` следует заменить на расположение двоичных файлов ADAL.

## <a name="configure-azure-directory-authentication-library-adal"></a>Настройка параметров библиотеки проверки подлинности Azure Directory (ADAL)

Пакет SDK для приложений Intune использует ADAL для своих сценариев проверки подлинности и условного запуска. Он также использует ADAL для регистрации удостоверения пользователя в службе MAM для управления без сценариев регистрации устройства.

Как правило, ADAL требует, чтобы приложение было зарегистрировано в [Azure Active Directory] и получило уникальный идентификатор — ClientID, а также другие идентификаторы, чтобы гарантировать безопасность токенов, предоставленных этому приложению. Пакет SDK для приложений Intune использует значения регистрации по умолчанию при подключении к Azure Active Directory.  

Если приложение использует ADAL для своего сценария проверки подлинности, оно должно использовать существующие значения регистрации и переопределять значения по умолчанию в пакете SDK для приложений Intune, чтобы избежать двойной проверки подлинности конечных пользователей (один раз пакетом SDK для приложений Intune и один раз приложением).

### <a name="adal-faqs"></a>Часто задаваемые вопросы по ADAL

**Какие двоичные файлы ADAL использовать?**

Сейчас пакет SDK для приложений Intune использует ветвь брокера [ADAL на GitHub](https://github.com/AzureAD/azure-activedirectory-library-for-objc) для поддержки приложений, требующих условный доступ (которые, таким образом, зависят от Microsoft Authenticator). Тем не менее пакет SDK совместим с главной ветвью ADAL. Используйте ту ветвь, которая лучше подходит для вашего приложения.

**Как выполнять связывание с двоичными файлами ADAL?**

Добавьте `-force_load {PATH_TO_LIB}/libADALiOS.a` OTHER_LDFLAGS в параметр конфигурации сборки `OTHER_LDFLAGS` проекта или в "Other Linker Flags" (Другие флаги компоновщика) в пользовательском интерфейсе. `PATH_TO_LIB` следует заменить на расположение двоичных файлов ADAL. Кроме того, обязательно скопируйте набор ADAL в приложение.  

Дополнительные сведения см. в инструкциях из раздела [ADAL на Github](https://github.com/AzureAD/azure-activedirectory-library-for-objc).


**Как использовать кэш ADAL совместно с другими приложениями, подписанными с помощью того же профиля подготовки?**

Если для приложения не определено ни одной группы доступа к цепочке ключей, добавьте идентификатор пакета приложения в качестве первой группы.
Включите единый вход ADAL, добавив группы доступа `com.microsoft.adalcache` и `com.microsoft.workplacejoin` к правам цепочки ключей.

Если вы явным образом задаете группу цепочки ключей для общего кэша ADAL, убедитесь, что она имеет значение `<app_id_prefix>.com.microsoft.adalcache`. ADAL автоматически задает это значение, пока вы не переопределите его. Если вы хотите задать настраиваемую группу цепочки ключей для замены `com.microsoft.adalcache`, укажите ее в разделе "IntuneMAMSettings" файла Info.plist, используя ключ `ADALCacheKeychainGroupOverride`.

**Как заставить пакет SDK для приложений Intune применить параметры ADAL, которые уже использует мое приложение?**

Если приложение уже использует ADAL, сведения о задании соответствующих параметров см. в разделе о IntuneMAMSettings ниже:  

* ADALClientId
* ADALRedirectUri
* ADALRedirectScheme
* ADALCacheKeychainGroupOverride

**Как переключаться между рабочей и внутренней тестовой средами AAD?**

Указать среду AAD, используемую для вызовов ADAL, можно с помощью параметра `AadAuthorityURI` в `MAMPolicies.plist`. Сейчас по умолчанию используется подготовительная среда AAD (PPE), если это значение не было переопределено.

Чтобы выполнить тестирование в среде PPE, можно использовать параметр времени компиляции или выполнения.

Чтобы использовать параметр среды времени компиляции для URL-адресов службы MAM и AAD, задайте для логического флага `UsePPE` значение "true" в файле MAMEnvironment.plist. (**Примечание**. Аналогичная операция через файл Info.plist не поддерживается.)

Чтобы использовать параметр среды времени выполнения, задайте для `com.microsoft.intune.mam.useppe` в параметрах по умолчанию обычного пользователя значение "1" для использования PPE. Этот параметр заменяет существующий параметр `com.microsoft.intune.mam.AADAuthorityEnvironment`.

**Как переопределить URL-адрес центра AAD на URL-адрес конкретного клиента, предоставленный во время выполнения?**

Задайте свойство `aadAuthorityUriOverride` в экземпляре IntuneMAMPolicyManager.

**Примечание**. Это потребуется в сценарии MAM без регистрации устройств, чтобы разрешить пакету SDK повторно использовать токен обновления ADAL, полученный приложением.

**Примечание**. Пакет SDK будет продолжать использовать этот URL-адрес центра для обновления политики и любых последующих запросов на регистрацию, пока это значение не будет очищено или изменено.  Поэтому очень важно очищать значение, когда корпоративный пользователь выходит из приложения, и сбрасывать его при входе нового корпоративного пользователя.


**Что делать, если мое приложение использует ADAL для проверки подлинности?**

Если приложение уже использует ADAL для проверки подлинности, необходимо выполнить описанные ниже действия. Если приложение не зависит от ADAL, следует просмотреть раздел о том, как пройти регистрацию с помощью службы Intune, когда приложение не использует ADAL.

* В словаре IntuneMAMSettings с именем ключа `ADALClientId` в файле Info.plist проекта укажите ClientID, используемый для вызовов ADAL.

* В словаре IntuneMAMSettings с именем ключа `ADALRedirectUri` в файле Info.plist проекта укажите URI перенаправления, используемый для вызовов ADAL. В зависимости от формата URI перенаправления приложения можно также указать `ADALRedirectScheme` .



## <a name="register-your-app-with-intune-mam-service"></a>Регистрация приложения с помощью службы MAM

### <a name="use-the-apis"></a>Использование API
Теперь пакет SDK для приложений Intune позволяет приложениям iOS получать политики MAM из Intune без прохождения MDM-регистрации в Intune. Для поддержки этих новых функций пакет SDK предоставляет новые API, чтобы приложение могло получать политики MAM. Чтобы использовать новые интерфейсы API, выполните следующие действия:

1. Используйте последний выпуск пакета SDK для приложений Intune, поддерживающий управление приложениями как с регистрацией устройства, так и без нее. Если ваше приложение использовала предыдущую версию пакета SDK без такой функции, потребуется обновить библиотеку MAM Intune, а также добавить в папку Headers заголовки из последнего пакета SDK.

2. Добавьте IntuneMAMEnrollment.h во все файлы, которые будут вызывать указанные API.

3. Чтобы выполнить тестирование в среде PPE, можно использовать параметр времени компиляции или выполнения.

    Чтобы использовать параметр среды времени компиляции для URL-адресов службы MAM и AAD, задайте для логического флага `UsePPE` значение "true" в файле MAMEnvironment.plist. (**Примечание**. Аналогичная операция через файл Info.plist не поддерживается.)

    Чтобы использовать параметр среды времени выполнения, задайте для `com.microsoft.intune.mam.useppe` в параметрах по умолчанию обычного пользователя значение "1" для использования PPE. Этот параметр заменяет существующий параметр `com.microsoft.intune.mam.AADAuthorityEnvironment`.


### <a name="register-accounts"></a>Регистрация учетных записей

Приложение может получать политики MAM из службы Intune, если оно зарегистрировано от имени учетной записи указанного пользователя.  Именно приложение отвечает за регистрацию любого вошедшего в систему пользователя с использованием пакета SDK для приложений Intune.  После проверки подлинности учетной записи нового пользователя приложение должно вызвать метод `registerAndEnrollAccount` из **Headers/IntuneMAMEnrollment.h**:

```objc
/**


 *  This method will add the account to the list of registered accounts.
 *  An enrollment request will immediately be started.
 *  @param identity The UPN of the account to be registered with the SDK
 */

(void)registerAndEnrollAccount:(NSString *)identity;

```
Путем вызова указанного выше метода пакет SDK регистрирует учетную запись пользователя и пытается зарегистрировать приложение от имени этой учетной записи.  Если по какой-либо причине происходит сбой регистрации, пакет SDK повторит ее попытку через 24 часа.  В целях отладки приложение может через делегата получать уведомления о результатах любых запросов на регистрацию (подробности см. ниже).

После вызова этого API приложение может продолжить работу в обычном режиме.  В случае успешной регистрации пакет SDK уведомит пользователя о том, что требуется перезапуск приложения.  При этом пользователь может немедленно перезапустить приложение.


### <a name="de-register-accounts"></a>Отмена регистрации учетных записей


Перед выходом пользователя из приложения оно должно отменить регистрацию пользователя в пакете SDK.  Этим обеспечивается следующее:

1. Прекращаются повторные попытки регистрации для учетной записи пользователя.
2. Если пользователь успешно зарегистрировал приложение, их регистрация в службе MAM Intune отменяется, а политики MAM удаляются.
3. При необходимости можно инициировать выборочную очистку, чтобы обеспечить удаление всех рабочих или учебных данных.

До выхода пользователя из системы приложение должно вызвать следующий API из **Headers/IntuneMAMEnrollment.h**:

```objc
/*
 *  This method will remove the provided account from the list of
 *  registered accounts.  Once removed, if the account has enrolled
 *  the application, the account will be un-enrolled.
 *  @note In the case where an un-enroll is required, this method will block
 *  until the Intune MAM AAD token is acquired, then return.  This method must be called before  
 *  the user is removed from the application (so that required AAD tokens are not purged
 *  before this method is called).
 *  @param identity The UPN of the account to be removed.
 *  @param doWipe   If YES, a selective wipe if the account is un-enrolled
 */

(void)deRegisterAndUnenrollAccount:(NSString *)identity withWipe:(BOOL)doWipe;
```

Этот метод должен вызываться до удаления токенов AAD учетной записи пользователя.  Пакету SDK требуется, чтобы токен приложения пользователя выполнял определенные запросы к службе MAM Intune от имени пользователя.

Если приложение самостоятельно удалит рабочие или учебные данные пользователя, можно задать для флага `doWipe` значение false.  В противном случае приложение может запросить у пакета SDK инициирование выборочной очистки, что приведет к вызову делегата выборочной очистки приложения.

```objc
[[IntuneMAMEnrollmentManager instance] deRegisterAndUnenrollAccount:@”user@foo.com” withWipe:YES];
```


## <a name="enrolling-without-prior-sign-in"></a>Регистрация без предварительного входа в систему

Приложение, которое не выполняет вход пользователя в Azure Active Directory, все равно может получать политики MAM из службы Intune путем вызова указанного ниже API, чтобы обработать такую проверку подлинности с помощью пакета SDK. Приложения должны использовать эту процедуру, если проверка подлинности пользователя в AAD не выполнена, но все равно требуется получить политики MAM для защиты данных в приложении, например, когда для входа в систему приложения применяется другая служба проверки подлинности или приложение вообще не поддерживает вход в систему. Для этого приложение должно вызвать метод `loginAndEnrollAccount` из **Headers/IntuneMAMEnrollment.h**:

```objc
/**
 *  Creates an enrollment request which is started immediately.
 *  If no token can be retrieved for the identity, the user will be prompted
 *  to enter their credentials, after which enrollment will be retried.
 *  @param identity The UPN of the account to be logged in and enrolled.
 */
 (void)loginAndEnrollAccount: (NSString *)identity;

```
Вызывая этот метод, пакет SDK запрашивает учетные данные пользователя, когда не удается найти токен, а затем попытается зарегистрировать приложение от имени этой учетной записи. Этот метод можно вызывать с "nil" в качестве удостоверения. В этом случае пакет SDK регистрируется на устройстве с помощью существующего пользователя MAM, а при отсутствии такового запрашивает имя пользователя.

В случае сбоя регистрации приложение должно иметь возможность снова вызвать этот API позже (в зависимости от характера сбоя). Приложение может через делегата получать уведомления о результатах любых запросов на регистрацию (см. подробности).

После вызова этого API приложение может продолжить работу в обычном режиме.  В случае успешной регистрации пакет SDK уведомит пользователя о том, что требуется перезапуск приложения, как показано выше в разделе о регистрации учетных записей.

## <a name="debug-information"></a>Отладочная информация

Приложение может получать уведомления об отладке для следующих запросов в службе MAM Intune:

 - Запросы на регистрацию
 - Запросы на обновление политики
 - Запросы на отмену регистрации

Уведомления передаются посредством методов делегата из **Headers/IntuneMAMEnrollmentDelegate.h**:

```objc
/**
 *  Called when an enrollment request operation is completed.
 * @param status status object containing debug information
 */

(void)enrollmentRequestWithStatus:(IntuneMAMEnrollmentStatus *)status;

/**
 *  Called when a MAM policy request operation is completed.
 *  @param status status object containing debug information
 */
(void)policyRequestWithStatus:(IntuneMAMEnrollmentStatus *)status;

/**
 *  Called when a un-enroll request operation is completed.
 *  @Note: when a user is un-enrolled, the user is also de-registered with the SDK
 *  @param status status object containing debug information
 */

(void)unenrollRequestWithStatus:(IntuneMAMEnrollmentStatus *)status;

```

Эти методы делегата возвращают объект `IntuneMAMEnrollmentStatus`, который содержит следующую информацию:

- Удостоверение учетной записи, связанной с запросом
- Код состояния, обозначающий результат запроса
- Строка ошибки с описанием кода состояния
- Объект NSError

Этот объект определяется в **Headers/IntuneMAMEnrollmentStatus.h** вместе с конкретными кодами состояния, которые могут быть возвращены.

Важно отметить, что эта информация предназначена для отладки, поэтому не следует использовать такие уведомления для реализации бизнес-логики в приложении.  Идея состоит в том, что приложение отправляет эти сведения в службу телеметрии для отладки или наблюдения.


## <a name="sample-code"></a>Образец кода

Ниже приведены примеры реализации методов делегата:

```objc
- (void)enrollmentRequestWithStatus:(IntuneMAMEnrollmentStatus *)status


{


    NSLog(@"enrollment result for identity %@ with status code %ld", status.identity, (unsigned long)status.statusCode);


    NSLog(@"Debug Message: %@", status.errorString);


}


- (void)policyRequestWithStatus:(IntuneMAMEnrollmentStatus *)status


{


    NSLog(@"policy check-in result for identity %@ with status code %ld", status.identity, (unsigned long)status.statusCode);


    NSLog(@"Debug Message: %@", status.errorString);


}


- (void)unenrollRequestWithStatus:(IntuneMAMEnrollmentStatus *)status


{


    NSLog(@"un-enroll result for identity %@ with status code %ld", status.identity, (unsigned long)status.statusCode);



    NSLog(@"Debug Message: %@", status.errorString);


}

```


## <a name="app-restart"></a>Перезапуск приложения

Когда приложение впервые получает политики MAM, требуется перезапустить его для применения необходимых обработчиков.  Чтобы уведомить приложение о необходимости перезапуска, пакет SDK предоставляет метод делегата в **Headers/IntuneMAMPolicyDelegate.h**.
```objc
 - (BOOL) restartApplication
```
Возвращаемое значение этого метода сообщает SDK, сможет ли приложение выполнить требуемый перезапуск.   

 - Если возвращается значение true, за обработку перезапуска будет отвечать приложение.   
 - Если возвращается значение false, пакет SDK перезапускает приложение.  Он сразу отображает диалоговое окно, сообщающее пользователю о том, что необходимо перезапустить приложение.

## <a name="implementing-save-as-controls"></a>Реализация элементов управления "Сохранить как"

Служба Intune позволяет ИТ-администраторам выбирать места хранения, в которых управляемое приложение может сохранять данные. Приложения могут запрашивать разрешенные места хранения у пакета SDK для приложений Intune с помощью интерфейса API **isSaveToAllowedForLocation**.

Перед сохранением управляемых данных в облачном или локальном расположении приложение должно вызвать интерфейс API **isSaveToAllowedForLocation**, чтобы определить, разрешил ли ИТ-администратор сохранение данных в этом месте.

При использовании интерфейса API **isSaveToAllowedForLocation** приложение должно передать имя участника-пользователя, используемое для расположения хранилища, если оно доступно.

### <a name="supported-save-locations"></a>Поддерживаемые расположения сохранения

Интерфейс API **isSaveToAllowedForLocation** предоставляет константы, указывающие, разрешил ли ИТ-администратор сохранять данные в следующих расположениях:

* IntuneMAMSaveLocationOther
* IntuneMAMSaveLocationOneDriveForBusiness
* IntuneMAMSaveLocationSharePoint
* IntuneMAMSaveLocationBox
* IntuneMAMSaveLocationDropbox
* IntuneMAMSaveLocationGoogleDrive
* IntuneMAMSaveLocationLocalDrive

Приложения должны использовать константы интерфейса API **isSaveToAllowedForLocation** для проверки того, можно ли сохранять данные в расположениях, считающихся управляемыми (например, в OneDrive для бизнеса) или личными. Кроме того, этот интерфейс API следует использовать, если приложению не удается определить, является ли расположение управляемым или личным.

Если известно, что расположение является личным, приложение должно использовать значение **IntuneMAMSaveLocationOther**.

Константу **IntuneMAMSaveLocationLocalDrive** следует использовать, когда приложение сохраняет данные в любом месте на локальном устройстве.



## <a name="configure-intune-app-sdk-settings"></a>Настройка параметров пакета SDK для приложений Intune

Словарь IntuneMAMSettings, содержащийся в файле Info.plist приложения, используется при настройке пакета SDK для приложений Intune. Ниже приведен список всех поддерживаемых параметров.

Некоторые из этих параметров уже описаны в предыдущих разделах, а некоторые применяются не ко всем приложениям.

Параметр  | Тип  | Определение | Необходим?
--       |  --   |   --       |  --
ADALClientId  | Строка  | Идентификатор клиента AAD приложения. | Требуется, если приложение использует ADAL.
ADALRedirectUri  | Строка  | URI перенаправления AAD для приложения. | Если приложение использует ADAL, требуется ADALRedirectUri или ADALRedirectScheme.
ADALRedirectScheme  | Строка  | Схема перенаправления AAD для приложения. Может использоваться вместо ADALRedirectUri, если URI перенаправления приложения имеет формат `scheme://bundle_id`. | Если приложение использует ADAL, требуется ADALRedirectUri или ADALRedirectScheme.
ADALLogOverrideDisabled | Логическое значение  | Указывает, будет ли пакет SDK перенаправлять все журналы ADAL (включая вызовы ADAL из приложения при их наличии) в свой файл журнала. По умолчанию используется значение NO (Нет). Задайте значение YES (Да), если приложению требуется выполнить собственный обратный вызов журнала ADAL. | Необязательный параметр.
ADALCacheKeychainGroupOverride | Строка  | Указывает группе цепочки ключей использовать кэш ADAL вместо "com.microsoft.adalcache". Обратите внимание, что этот параметр не содержит префикс идентификатора приложения. Он будет добавлен к предоставленной строке во время выполнения. | Необязательный параметр.
AppGroupIdentifiers | Массив строк  | Массив групп приложений из раздела com.apple.security.application-groups прав приложения. | Требуется, если приложение использует группы приложений.
ContainingAppBundleId | Строка | Указывает идентификатор пакета содержащего приложения расширения. | Требуется для расширений iOS.
DebugSettingsEnabled| Логическое значение | Если задано значение "YES" (Да), можно применить политики теста в пакете параметров. В поставляемых приложения этот параметр **должен** быть отключен. | Необязательный параметр.
MainNibFile<br>MainNibFile~ipad  | Строка  | Этот параметр должен содержать имя главного файла NIB приложения.  | Требуется, если приложение определяет MainNibFile в своем файле Info.plist.
MainStoryboardFile<br>MainStoryboardFile~ipad  | Строка  | Этот параметр должен содержать имя главного файла STORYBOARD приложения. | Требуется, если приложение определяет UIMainStoryboardFile в своем файле Info.plist.
MAMPolicyRequired| Логическое значение| Указывает, будет ли блокироваться запуск приложения без политики MAM Intune. По умолчанию используется значение "no" (Нет).
MAMPolicyWarnAbsent | Логическое значение| Указывает, будет ли приложение без политики MAM Intune уведомлять пользователя во время запуска. Примечание. В магазин нельзя отправлять приложения, у которых для этого параметра задано значение "YES" (Да). | Необязательный параметр.
MultiIdentity | Логическое значение| Указывает, поддерживает ли приложение множественное удостоверение. | Необязательный параметр.
SplashIconFile <br>SplashIconFile~ipad | Строка  | Задает файл значка заставки Intune. Дополнительные сведения см. в приведенном здесь разделе "Файлы изображений при запуске". | Необязательный параметр.
SplashDuration | Число | Минимальное количество времени в секундах, в течение которого экран-заставка Intune отображается при запуске приложения. По умолчанию используется значение 1,5. | Необязательный параметр.
BackgroundColor| Строка| Задает цвет фона для экранов заставки и ввода ПИН-кода. Принимает шестнадцатеричную строку RGB в виде "#XXXXXX", где "X" может принимать значение от 0 до 9 или от A до F. Символ решетки можно опустить.   | По умолчанию используется светло-серый цвет.
ForegroundColor| Строка| Задает цвет переднего плана для экранов заставки и ввода ПИН-кода, например цвет текста. Принимает шестнадцатеричную строку RGB в виде "#XXXXXX", где "X" может принимать значение от 0 до 9 или от A до F. Символ решетки можно опустить.  | По умолчанию используется черный цвет.
AccentColor | Строка| Задает цвет элементов для экрана ввода ПИН-кода, например цвет текста кнопки и цвет выделения поля.  Принимает шестнадцатеричную строку RGB в виде "#XXXXXX", где "X" может принимать значение от 0 до 9 или от A до F. Символ решетки можно опустить.| По умолчанию используется системный синий цвет.
MAMTelemetryDisabled| Логическое значение| Указывает, будет ли пакет SDK отправлять данные телеметрии в свою серверную часть.| Необязательный параметр.
MAMTelemetryUsePPE | Логическое значение | Указывает, будет ли пакет SDK отправлять данные в серверную часть подготовительной среды (PPE). Используется при тестировании приложений с помощью политики Intune, чтобы данные телеметрии теста не смешивались с данными клиентов. | Необязательный параметр.

## <a name="telemetry"></a>Телеметрия

По умолчанию пакет SDK для приложений Intune для iOS регистрирует данные телеметрии для событий использования, а затем отправляет их в Microsoft Intune. Данные регистрируются для следующих событий использования:

1. **Запуск приложения**: чтобы предоставить Microsoft Intune сведения об использовании приложений с поддержкой MAM по типу управления (MAM с MDM, MAM без регистрации MDM и т. д.).

2. **Вызов API EnrollApplication**: чтобы предоставить Microsoft Intune сведения об уровне успешности и других метриках производительности вызовов `enrollApplication` со стороны клиента.

**Примечание**. Если вы решили не отправлять данные телеметрии пакета SDK для приложений Intune в Microsoft Intune из своего мобильного приложения, необходимо отключить фиксирование данных телеметрии пакета SDK, задав значение "YES" (Да) для свойства `MAMTelemetryDisabled` в словаре IntuneMAMSettings.





## <a name="enable-multi-identity-optional"></a>Включение множественного удостоверения (необязательно)

По умолчанию пакет SDK применяет политику для всего приложения. Множественное удостоверение — это функция MAM, которую можно включить, чтобы разрешить применение политики на уровне удостоверения.  Для этого требуется больше содействия со стороны приложения, чем для других функций MAM.

Приложение должно уведомить пакет SDK о том, что оно собирается заменить активное удостоверение. Пакет SDK также будет уведомлять приложение, когда требуется заменить удостоверение. Сейчас поддерживается только одно управляемое удостоверение. После регистрации приложения или устройства пользователем пакет SDK использует это удостоверение, считая его основным управляемым удостоверением. Другие пользователи в приложении будут рассматриваться как неуправляемые и не будут иметь ограничения для параметров политик.

Обратите внимание, что удостоверение определяется просто в виде строки. Удостоверения задаются без учета регистра, и запросы удостоверения, направляемые к пакету SDK, могут возвращать удостоверения с регистром, отличным от изначального.


### <a name="overview"></a>Обзор

Удостоверение — это просто имя пользователя учетной записи (например, user@contoso.com). Разработчики могут задать удостоверение приложения на следующих уровнях:

* **Удостоверение процесса**: задает удостоверение всего процесса и используется в основном для приложений с одним удостоверением. Это удостоверение затрагивает все операции, файлы и элементы пользовательского интерфейса.
* **Удостоверения пользовательского интерфейса**: определяет, какие политики применяются к операциям пользовательского интерфейса в основном потоке, таким как вырезание, копирование, вставка, ввод ПИН-кода, проверка подлинности, совместный доступ и т. д. Удостоверение пользовательского интерфейса не затрагивает операции с файлами (шифрование, резервное копирование и т. д.).
* **Удостоверение потока**: влияет на то, какие политики применяются для текущего потока. Это удостоверение затрагивает все операции, файлы и элементы пользовательского интерфейса.

Независимо от того, является ли пользователь управляемым, именно приложение отвечает за правильную настройку удостоверений.

В любой момент каждый поток имеет действующее удостоверение для операций пользовательского интерфейса и операций с файлами. Это удостоверение используется для определения применяемых политик (если таковые имеются). Если в качестве удостоверения отображается значение "no identity" (без удостоверения) либо пользователь не является управляемым, никакие политики не применяются.



### <a name="thread-queues"></a>Очереди потоков

Приложения часто отправляют асинхронные и синхронные задачи в очереди потоков. Пакет SDK перехватывает вызовы Grand Central Dispatch (Grand Central Dispatch) и сопоставляет удостоверение текущего потока с направленными задачами. При выполнении задач пакет SDK временно изменяет удостоверение потока на удостоверение, связанное с данной задачей, выполняет ее, а затем восстанавливает исходное удостоверение потока. Поскольку `NSOperationQueue` основана на GCD, `NSOperations` будут выполняться с удостоверением потока во время их добавления в `NSOperationQueue`. `NSOperations` или функции, назначенные напрямую с помощью GCD, также могут изменять удостоверение текущего потока во время выполнения. Это удостоверение переопределяет удостоверение, унаследованное от потока диспетчеризации.

### <a name="file-owner"></a>Владелец файла

Пакет SDK отслеживает удостоверение владельца локального файла и применяет соответствующие политики. Владелец файла задается при создании файла или при его открытии в режиме усечения. Владелец устанавливается в качестве эффективного удостоверения для операции с файлом в потоке, выполняющем такую операцию. Кроме того, приложения могут явным образом задать удостоверение владельца с помощью `IntuneMAMFilePolicyManager`. Приложения могут использовать `IntuneMAMFilePolicyManager` для получения имени владельца файла и для задания удостоверения пользовательского интерфейса перед отображением содержимого файла.


### <a name="shared-data"></a>Файлы общих данных

Если приложение создает файлы, содержащие данные как управляемых, так и неуправляемых пользователей, оно отвечает за шифрование данных управляемых пользователей. Данные могут быть зашифрованы с помощью API `protect` и `unprotect` в `IntuneMAMDataProtectionManager`. Метод `protect` принимает удостоверение, которое может относиться как к управляемому, так и к неуправляемому пользователю. Если пользователь является управляемым, данные шифруются. Если пользователь является неуправляемым, в данные добавляется заголовок, кодирующий удостоверение, но сами данные не шифруются.  Метод `protectionInfo` можно использовать для получения данных владельца.

### <a name="share-extensions"></a>Расширения общего доступа

Если приложение содержит расширение общего доступа, владельца общего элемента можно получить с помощью метода `protectionInfoForItemProvider` в `IntuneMAMDataProtectionManager`. Если общий элемент является файлом, пакет SDK обрабатывает задание владельца файла. Когда общий элемент является данными, приложение должно задать владельца файла, если эти данные сохраняются в файл, и вызвать API `setUIPolicyIdentity` (как описано ниже) перед отображением этих данных в пользовательском интерфейсе.

### <a name="turn-on-multi-identity"></a>Включение множественных удостоверений

По умолчанию приложения считаются имеющими одно удостоверение, и в качестве удостоверения процесса пакет SDK задает зарегистрированного пользователя. Чтобы включить поддержку множественных удостоверений, в словарь **IntuneMAMSettings** в файле Info.plist приложения нужно добавить логический параметр `MultiIdentity` со значением "YES" (Да).

> [!NOTE]
> Когда множественное удостоверение включено, удостоверениям процесса, пользовательского интерфейса и потока присваивается значение "nil". За правильность их настройки отвечает приложение.


### <a name="switching-identities"></a>Замена удостоверений

* **Замена удостоверений, инициированная приложением**:

    При запуске приложений с множественным удостоверением считается, что они выполняются под неизвестной и неуправляемой учетной записью. Пользовательский интерфейс условного запуска не открывается, а политики не применяются к приложению. Приложение отвечает за своевременное уведомление пакета SDK о замене удостоверения. Как правило, это происходит перед тем, как приложение собирается отобразить данные для конкретной учетной записи пользователя.

    Примером служит ситуация, когда пользователь пытается открыть документ, почтовый ящик или вкладку в записной книжке. Приложению необходимо уведомить пакет SDK до фактического открытия файла, почтового ящика или вкладки. Это осуществляется посредством API `setUIPolicyIdentity` в `IntuneMAMPolicyManager`. Этот API должен вызываться независимо от того, является ли пользователь управляемым. Если пользователь является управляемым, пакет SDK выполняет проверки условного запуска (обнаружение снятия ограничения на доступ к файловой системе, ПИН-код, проверка подлинности и т. д.). Результат замены удостоверения возвращается в приложение асинхронно через завершающий обработчик. Приложению следует отложить открытие документа, почтового ящика, вкладки и т. п. до возвращения кода успешного результата. В случае сбоя замены удостоверения приложение должно отменить операцию.

* **Замена удостоверений, инициированная пакетом SDK**:

    Существуют случаи, когда пакету SDK необходимо велеть приложению переключиться на определенное удостоверение. Для обработки этого запроса приложения с множественным удостоверением должны реализовать метод `identitySwitchRequired` в `IntuneMAMPolicyDelegate`. Если при вызове приложение может обработать запрос по переключению на указанное удостоверение, оно должно передать `IntuneMAMAddIdentityResultSuccess` в завершающий обработчик. Если приложению не удается обработать смену удостоверения, ему следует передать в завершающий обработчик значение `IntuneMAMAddIdentityResultFailed`. Приложению не нужно вызывать `setUIPolicyIdentity` в ответ на этот вызов. Если пакету SDK необходимо, чтобы приложение переключилось на учетную запись неуправляемого пользователя, в вызов `identitySwitchRequired` передается пустая строка.

* **Выборочная очистка**:

    Когда к приложению применяется выборочная очистка, пакет SDK вызывает метод `wipeDataForAccount` в `IntuneMAMPolicyDelegate`. Приложение отвечает за удаление учетной записи указанного пользователя и любых связанных с ней данных. Пакет SDK может удалить все файлы, принадлежащие такому пользователю, и сделает это, если приложение возвращает значение "FALSE" из вызова `wipeDataForAccount`. Обратите внимание, что этот метод вызывается из фонового потока, и приложение не должны возвращать значение, пока все данные пользователя не будут удалены (за исключением файлов, если приложение возвращает значение "FALSE").

## <a name="debug-the-intune-app-sdk-in-xcode"></a>Отладка пакета SDK для приложений Intune в Xcode

Перед ручным тестированием приложения с поддержкой MAM с помощью Microsoft Intune вы можете воспользоваться файлом **Settings.bundle** при работе в Xcode. Это позволит вам задать политики тестирования без подключения к Intune. Чтобы включить эту функцию, выполните следующие действия:

* Добавьте файл Settings.bundle, щелкнув правой кнопкой мыши папку верхнего уровня в проекте. Выберите "Добавить -> Новый файл" в меню. Выберите шаблон "Settings Bundle" (Пакет параметров) в разделе "Ресурсы" для его добавления.

* Только в отладочных сборках — скопируйте MAMDebugSettings.plist в Settings.bundle.

* В Root.plist (находится в Settings.bundle) добавьте настройку "Type" = Child Pane и "FileName" = MAMDebugSettings.

* В разделе **Параметры -> Имя_вашего_приложения** включите параметр "Enable Test Policies" (Включить политики тестирования).

* Запустите приложение (внутри Xcode либо за его пределами).

* В разделе **Параметры -> Имя_вашего_приложения -> Enable Test Policies ** (Включить политики тестирования) включите политику, например "ПИН-код".

* Запустите приложение (внутри Xcode либо за его пределами). Убедитесь, что политика "ПИН-код" работает правильно.

> [!NOTE]
> Теперь для включения и настройки параметров можно использовать меню **Параметры -> Имя_вашего_приложения -> Enable Test Policies** (Включить политики тестирования).

## <a name="recommended-ios-best-practices"></a>Рекомендации и советы для iOS

Ниже приведены некоторые рекомендации по разработке для iOS:

Файловая система iOS чувствительна к регистру. Убедитесь, что имена файлов, такие как `libIntuneMAM.a` и `IntuneMAMResources.bundle`.

Если Xcode не удается найти `libIntuneMAM.a`, можно устранить данную проблему, добавив путь к этой библиотеке в пути поиска компоновщика.



## <a name="faq"></a>Часто задаваемые вопросы

 **Нужно ли регистрировать в службе MAM всех пользователей моего приложения?**

Нет.  На самом деле с использованием пакета SDK для приложений Intune требуется регистрировать только рабочие или учебные учетные записи.  Именно приложения должны определять, используется ли учетная запись в контексте рабочей или учебной.   

**А что насчет пользователей, которые уже выполнили вход в приложение?  Нужно ли их регистрировать?**

Приложение отвечает не только за регистрацию пользователей после успешной проверки подлинности, но и за регистрацию существующих учетных записей, которые могли присутствовать до реализации функциональности MAM без MDM в приложении.   


Для этого приложение должно использовать метод `registeredAccounts:`.  Этот метод возвращает NSDictionary, содержащий все учетные записи, зарегистрированные в службе MAM Intune.  Любые из имеющихся в приложении учетных записей отсутствуют в списке, приложение должно зарегистрировать их с помощью `registerAndEnrollAccount:`.




**Как часто пакет SDK повторяет попытки регистрации?**

Пакет SDK автоматически повторяет все ранее неудачные попытки регистрации с 24-часовым интервалом.  Пакет делает это для того, чтобы убедиться, что если организация пользователя включила функции MAM после его входа в приложение, пользователь будет успешно зарегистрирован и получит политики.

Пакет SDK прекратит попытки, когда обнаружит, что пользователь успешно зарегистрирован в приложении.  Это вызвано тем, что только один пользователь может зарегистрировать приложение в любой отдельный момент времени. В случае отмены регистрации пользователя повторные попытки возобновляются с тем же 24-часовым интервалом.


**Почему требуется отменять регистрацию пользователя?**

Пакет SDK будет периодически выполнять в фоновом режиме следующие действия:

 - Если приложение еще не зарегистрировано, он будет пытаться зарегистрировать все указанные учетные записи каждые 24 часа.
 - Если приложение зарегистрировано, пакет SDK будет каждые 8 часов проверять наличие обновлений для политики MAM.

При отмене регистрации пользователя пакет SDK уведомляется о том, что пользователь больше не будет использовать приложение и можно прекратить описанные выше периодические действия для данной учетной записи.  Кроме того, при необходимости вызывается отмена регистрации приложения и выборочная очистка.

**Следует установить флаг doWipe в значение true в методе deregister?**
Этот метод должен вызываться перед выходом пользователя из приложения.  Если в рамках выхода данные пользователя удаляются из приложения, то для `doWipe` можно задать значение false.  Однако если приложение не удаляет данные пользователя, следует присвоить значение true, чтобы пакет SDK мог самостоятельно удалить эти данные.

**Существуют другие способы отменены регистрации для приложения?**
Да, ИТ-администратор может отправить в приложение команду выборочной очистки, что приведет к отмене регистрации пользователя и очистке всех его данных.  Пакет SDK автоматически обрабатывает этот сценарий и отправляет уведомление через метод делегата для отмены регистрации.

## <a name="submitting-your-app-to-the-app-store"></a>Отправка приложения в магазин
Как статическая библиотека, так и сборки платформы в пакете SDK для приложений Intune являются универсальными двоичными файлами, то есть содержат код для всех архитектур устройств и симуляторов. Apple отклоняет приложения, отправляемые в App Store, если они содержат код симулятора. При компиляции со статической библиотекой для сборок, предназначенных только для устройств, компоновщик автоматически удаляет код симуляторов.

Если приложение использует такую **сборку платформы** пакета SDK для приложений Intune, вам необходимо вручную убрать архитектуры симулятора из универсальной платформы перед отправкой приложения в магазин. В этом вам помогут следующие инструкции:

1. Убедитесь, что `IntuneMAM.framework` находится на вашем рабочем столе.
2. Выполните следующие команды:

    ```bash
    lipo ~/Desktop/IntuneMAM.framework/IntuneMAM -remove i386 -remove x86_64 -output ~/Desktop/IntuneMAM.device_only
    ```
    Первая команда удаляет архитектуры симулятора из динамической библиотеки платформы.
    ```bash
    cp ~/Desktop/IntuneMAM.device_only ~/Desktop/IntuneMAM.framework/IntuneMAM
    ```
    Вторая команда копирует в каталог платформы динамическую библиотеку, предназначенную только для устройств.



<!--HONumber=Nov16_HO3-->


