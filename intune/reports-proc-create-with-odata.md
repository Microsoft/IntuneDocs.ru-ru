---
title: Создание отчета из веб-канала OData с помощью Power BI
titlesuffix: Microsoft Intune
description: Узнайте, как создать визуализацию в виде дерева с помощью Power BI Desktop, используя интерактивный фильтр из API хранилища данных Intune.
keywords: Хранилище данных Intune
author: Erikre
ms.author: erikre
manager: dougeby
ms.date: 05/15/2018
ms.topic: article
ms.prod: ''
ms.service: microsoft-intune
ms.technology: ''
ms.assetid: A2C8A336-29D3-47DF-BB4A-62748339391D
ms.reviewer: aanavath
ms.suite: ems
ms.custom: intune-classic
ms.openlocfilehash: 12725f567cf84d1d7e9110da747470984bc28c01
ms.sourcegitcommit: 34e96e57af6b861ecdfea085acf3c44cff1f3d43
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/17/2018
ms.locfileid: "34224857"
---
# <a name="create-a-report-from-the-odata-feed-with-power-bi"></a>Создание отчета из веб-канала OData с помощью Power BI

В этой статье описано, как создать визуализацию в виде дерева с помощью Power BI Desktop, используя интерактивный фильтр. Например, вашему финансовому директору может потребоваться узнать, каковы доли корпоративных и личных устройств в вашей организации. Диаграмма "дерево" позволяет получить информацию об общем количестве устройств разных типов. Вы можете узнать число корпоративных или личных устройств на основе iOS, Android и Windows.

### <a name="overview-of-creating-the-chart"></a>Общие сведения о создании диаграммы

Чтобы создать эту диаграмму, выполните указанные ниже действия.
1. Установите приложение Power BI Desktop, если у вас его еще нет.
2. Подключитесь к модели хранилища данных Intune и получите актуальные данные для нее.
3. Создайте или настройте связи внутри модели данных.
4. Создайте диаграмму на основе данных из таблицы **devices**.
5. Создайте интерактивный фильтр.
6. Просмотрите готовую диаграмму.

### <a name="a-note-about-tables-and-entities"></a>Замечание касательно таблиц и сущностей

В Power BI вы работаете с таблицами. Таблица содержит поля данных. Каждое поле данных имеет определенный тип. Поле может содержать данные только этого типа. К типам данных относятся числовой тип, текст, даты и т. д. Таблицы в Power BI заполняются текущими данными из клиента при загрузке модели. Хотя данные со временем меняются, структура таблицы остается неизменной, пока вы не измените базовую модель данных.

Не следует путать термины _сущность_ и _таблица_. Модель данных доступна через веб-канал OData. Контейнеры, которые в Power BI называются таблицами, в контексте OData называются сущностями. Оба этих термина обозначают один и тот же объект, который служит для хранения данных.

## <a name="install-power-bi-desktop"></a>Установка Power BI Desktop

Установите последнюю версию Power BI Desktop. Ее можно скачать с сайта: [PowerBI.microsoft.com](https://powerbi.microsoft.com/desktop).

## <a name="connect-to-the-odata-feed-for-the-intune-data-warehouse-for-your-tenant"></a>Подключение к веб-каналу OData для хранилища данных Intune вашего клиента

> [!Note]  
> В Intune требуется разрешение **Отчеты**. Дополнительные сведения см. в разделе [Авторизация](reports-api-url.md).

1. Войдите на [портал Azure](https://portal.azure.com).
2. Выберите **Все службы** > **Intune**. Intune находится в разделе **Мониторинг и управление**.
3. Откройте панель **Хранилище данных Intune**.
4. Скопируйте настраиваемый URL-адрес веб-канала. Пример: `https://fef.tenant.manage.microsoft.com/ReportingService/DataWarehouseFEService?api-version=beta`
5. Откройте Power BI Desktop.
6. Выберите **Получить данные** > **Веб-канал OData**.
7. Вставьте настраиваемый URL-адрес веб-канала в поле URL-адреса в окне **Веб-канал OData**.
8. Установите переключатель в положение **Основной**.

    ![Веб-канал OData](media/reports-create-01-odatafeed.png)

9. Нажмите кнопку **ОК**.
10. Выберите пункт **Учетная запись организации**, а затем выполните вход, используя учетные данные Intune.

    ![Учетные данные организации](media/reports-create-02-org-account.png)

11. Выберите **Подключиться**. Откроется окно "Навигатор" со списком таблиц, имеющихся в хранилище данных Intune.

    ![Навигатор](media/reports-create-02-loadentities.png)

12. Выберите таблицы **devices** и **ownerTypes**.  Выберите **Загрузить**. Power BI загрузит данные в модель.

## <a name="create-a-relationship"></a>Создание связи

Вы можете импортировать несколько таблиц, чтобы проанализировать связанные данные из них.  В Power BI есть функция **автообнаружения**, которая пытается автоматически выявить и создать связи. Таблицы в хранилище данных были созданы так, чтобы поддерживать функцию автообнаружения в Power BI. Но даже если Power BI не удается автоматически найти связи, вы можете настроить их вручную.

![Управление связями](media/reports-create-03-managerelationships.png)

1. Выберите **Управление связями**.
2. Если приложение Power BI еще не обнаружило связи, нажмите кнопку **Автообнаружение...**.

Связи отображаются в столбцах "Из таблицы" и "В таблицу". В этом примере поле данных **ownerTypeKey** в таблице **devices** связано с полем данных **ownerTypeKey** в таблице **ownerTypes**. С помощью этой связи можно определить обычное название по коду типа устройства в таблице **devices**.

## <a name="create-a-treemap-visualization"></a>Создание визуализации в виде дерева

На диаграмме "дерево" данные упорядочены иерархически в виде полей в полях. Каждая ветвь иерархии представляет собой поле, которое содержит поля меньшего размера, представляющие подветви. С помощью Power BI Desktop можно создать дерево данных Intune.

![Визуализации > Диаграмма дерева](media/reports-create-03-treemap.png)

1. Выберите тип диаграммы. Выберите **Диаграмма дерева**.
2. В модели данных найдите таблицу **devices**.
3. Разверните **таблицу devices** и выберите поле данных **manufacturer** на панели **Поля**.
4. Перетащите поле данных **manufacturer** на диаграмму "дерево" на холсте отчетов.
5. Перетащите поле данных **deviceKey** из таблицы **devices** в раздел **Значения** области **Визуализации** в поле **Перетащите поле данных сюда**.  

Вы создали визуализацию, на которой представлено распределение устройств в организации по производителям.

![Диаграмма "дерево" с данными](media/reports-create-06-treemapwdata.png)

## <a name="add-a-filter"></a>Добавление фильтра

Вы можете добавить к диаграмме "дерево" фильтр, который позволяет получать ответы на дополнительные вопросы.


1. Чтобы добавить фильтр, щелкните холст отчетов, а затем на панели **Визуализации** щелкните **значок среза** (![диаграмма "дерево" с данными](media/reports-create-slicer.png)).
2. Найдите таблицу **ownerTypes** и перетащите поле данных **ownerTypeName** в раздел **Фильтры** на панели **Визуализации**.  

   В таблице devices есть поле данных **OwnerTypeKey** с кодом, указывающим, является ли устройство корпоративным или личным. Так как в фильтре должны отображаться понятные имена, найдите таблицу **ownerTypes** и перетащите поле **ownerTypeName**. Этот пример показывает, как модель данных поддерживает связи между таблицами.

![Диаграмма "дерево" с фильтром](media/reports-create-08_ownertype.png)

Теперь у вас есть интерактивный фильтр, с помощью которого можно переключаться между корпоративными и личными устройствами. Используйте этот фильтр для отслеживания изменений распределения.

1. Выберите **Корпоративные**, чтобы увидеть распределение корпоративных устройств.
2. Выберите **Личные**, чтобы увидеть распределение личных устройств.

## <a name="next-steps"></a>Дальнейшие шаги

 - Дополнительные сведения о [создании связей и управлении ими](https://powerbi.microsoft.com/documentation/powerbi-desktop-create-and-manage-relationships/) в приложении Power BI Desktop см. в документации по Power BI.
 - Изучите [модель хранилища данных Intune](https://docs.microsoft.com/intune/reports-ref-data-model).
