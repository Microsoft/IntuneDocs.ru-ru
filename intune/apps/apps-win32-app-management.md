---
title: Добавление и назначение приложений Win32 в Microsoft Intune
titleSuffix: ''
description: Узнайте, как добавлять, назначать и администрировать приложения Win32 в Microsoft Intune. В этой статье описано, как выполнять доставку и администрирование приложений Intune Win32, а также представлены сведения об устранении неполадок приложений Win32.
keywords: ''
author: Erikre
ms.author: erikre
manager: dougeby
ms.date: 09/09/2019
ms.topic: conceptual
ms.service: microsoft-intune
ms.localizationpriority: high
ms.technology: ''
ms.assetid: efdc196b-38f3-4678-ae16-cdec4303f8d2
ms.reviewer: mghadial
ms.suite: ems
search.appverid: MET150
ms.custom: intune-azure
ms.collection: M365-identity-device-management
ms.openlocfilehash: 593c2d2b509047115ebeb3415393d6112484a6a9
ms.sourcegitcommit: 88b6e6d70f5fa15708e640f6e20b97a442ef07c5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/02/2019
ms.locfileid: "71724988"
---
# <a name="intune-standalone---win32-app-management"></a>Изолированная среда Intune — управление приложениями Win32

Сейчас [автономная среда Intune](../fundamentals/mdm-authority-set.md) предоставляет улучшенные возможностей управления приложениями Win32. Хотя клиенты, подключенные к облаку, могут использовать Configuration Manager для управления приложениями Win32, пользователи только Intune будут иметь больше возможностей управления своими бизнес-приложениями Win32. В этой статье описана функция управления приложениями Win32 Intune и приведены сведения об устранении неполадок.

> [!NOTE]
> Эта функция поддерживает 32- и 64-разрядные архитектуры ОС для приложений Windows.

## <a name="prerequisites"></a>Предварительные условия

Для использования функции управления приложениями Win32 необходимо выполнить следующие условия.

- Windows 10 Корпоративная версии 1607 или выше (Корпоративная, Профессиональная и для образовательных учреждений)
- Клиент Windows 10 должен быть: 
  - устройства должны быть присоединены к AAD и автоматически зарегистрированы. Расширение управления Intune поддерживает устройства, присоединенные к Azure AD, гибридному домену, а также зарегистрированные для поддержки групповой политики. 
  > [!NOTE]
  > В случаях, когда устройство зарегистрировано для поддержки групповой политики, конечный пользователь использует локальную учетную запись для присоединения устройства Windows 10 к AAD. Пользователь должен войти на устройство с помощью свей учетной записи AAD и зарегистрироваться в Intune. Если скрипт PowerShell или приложение Win32 предназначены для пользователя или устройства, Intune установит на устройстве расширение управления Intune.
- Размер приложения Windows не может превышать 8 ГБ.

## <a name="prepare-the-win32-app-content-for-upload"></a>Подготовка к отправке содержимого приложения Win32

Для предварительной обработки классических приложений Windows (Win32) используйте [средство подготовки файлов Win32 (Майкрософт)](https://go.microsoft.com/fwlink/?linkid=2065730). Это средство преобразует файлы установки приложения в формат *.intunewin*. Оно также обнаруживает некоторые атрибуты, необходимые Intune для определения состояния установки приложения. После его использования в папке установщика приложения вы сможете создать приложение Win32 в консоли Intune.

> [!IMPORTANT]
> [Средство подготовки файлов Win32 (Майкрософт)](https://go.microsoft.com/fwlink/?linkid=2065730) упакует все файлы и вложенные папки при создании файла *INTUNEWIN*. Средство подготовки файлов Win32 (Майкрософт) должно быть сохранено отдельно от файлов и папок установщика. В этом случае вы не сможете включить его или другие ненужные файлы и папки в файл *INTUNEWIN*.

[Средство подготовки файлов Win32 (Майкрософт)](https://go.microsoft.com/fwlink/?linkid=2065730) можно скачать с GitHub. ZIP-файл содержит папку **Microsoft-Win32-Content-Prep-Tool-master**. В папке находится средство подготовки, лицензия, файл сведений и заметки о выпуске. 

### <a name="process-flow-to-create-intunewin-file"></a>Последовательность действий по созданию файла INTUNEWIN

   ![Последовательность действий по созданию файла INTUNEWIN](./media/apps-win32-app-management/prepare-win32-app.svg)

### <a name="run-the-microsoft-win32-content-prep-tool"></a>Запуск средства подготовки файлов Win32 (Майкрософт)

Если вы запускаете `IntuneWinAppUtil.exe` из командного окна без параметров, средство поможет вам последовательно задать необходимые параметры. Или можно добавить в команду указанные далее доступные параметры командной строки.

### <a name="available-command-line-parameters"></a>Возможные параметры командной строки 

|    **Параметр командной строки**    |    **Описание**    |
|:------------------------------:|:----------------------------------------------------------:|
|    `-h`     |    Справка    |
|    `-c <setup_folder>`     |    Папка для всех файлов установки. Все файлы в этой папке будут сжаты в файл *INTUNEWIN*.    |
|    `-s <setup_file>`     |    Файл установки (такой как *setup.exe* или *setup.msi*).    |
|    `-o <output_folder>`     |    Выходная папка для создаваемого файла с расширением *.intunewin*.    |
|    `-q`       |    Тихий режим    |

### <a name="example-commands"></a>Примеры команд

|    **Пример команды**    |    **Описание**    |
|:-----------------------------------------------------------------------------------------:|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------:|
|    `IntuneWinAppUtil -h`    |    Эта команда отображает информацию об инструменте.    |
|    `IntuneWinAppUtil -c c:\testapp\v1.0 -s c:\testapp\v1.0\setup.exe -o c:\testappoutput\v1.0 -q`    |    Эта команда создает файл `.intunewin` из указанной исходной папки и файла установки. Для MSI-файла установки этот инструмент будет извлекать сведения, необходимые для Intune. Если указан параметр `-q`, команда выполняется в тихом режиме; если выходной файл уже существует, он будет перезаписан. Кроме того, если выходная папка не существует, она будет создана автоматически.    |

Создавая файл *INTUNEWIN*, поместите все файлы, на которые создается ссылка, во вложенную папку в папке установки. Затем используйте относительный путь для создания ссылки на требуемый файл. Пример.

**Исходная папка установки:** *c:\testapp\v1.0*.<br>
**Файл лицензии:** *c:\testapp\v1.0\licenses\license.txt*.

Создайте ссылку на файл *license.txt*, используя относительный путь *licenses\license.txt*.

## <a name="create-assign-and-monitor-a-win32-app"></a>Создание, назначение и мониторинг приложения Win32

Подобно бизнес-приложениям (LOB), можно добавить приложение Win32 в Microsoft Intune. Приложения такого типа обычно создаются самостоятельно или сторонними разработчиками. 

### <a name="process-flow-to-add-a-win32-app-to-intune"></a>Последовательность действий по добавлению приложения Win32 в Intune

   ![Последовательность действий по добавлению приложения Win32 в Intune](./media/apps-win32-app-management/add-win32-app.svg)

### <a name="add-a-win32-app-to-intune"></a>Добавление приложения Win32 в Intune

Ниже приведены инструкции, которые помогут вам добавить приложение Windows в Intune.

### <a name="step-1-specify-the-software-setup-file"></a>Шаг 1. Выбор файла установки программного обеспечения

1. Войдите в [Intune](https://go.microsoft.com/fwlink/?linkid=2090973).
3. В панели **Intune** выберите **Клиентские приложения** > **Приложения** > **Добавить**.
4. На панели **Добавить приложение** выберите в раскрывающемся списке **Приложение Windows (Win32)** .

    ![Снимок экрана с колонкой "Добавление приложения" и раскрывающимся списком "Добавить тип"](./media/apps-win32-app-management/apps-win32-app-01.png)

### <a name="step-2-upload-the-app-package-file"></a>Шаг 2. Отправка файла пакета приложения

1. В панели **Добавить приложение** выберите **Файл пакета приложения**, чтобы выбрать файл. Появится панель файла пакета приложения.

    ![Снимок экрана с колонкой "Файл пакета приложения"](./media/apps-win32-app-management/apps-win32-app-02.png)

2. В области **Файл пакета приложения** нажмите кнопку обзора. Затем выберите файл установки Windows с расширением *.intunewin*.

    > [!IMPORTANT]
    > Используйте последнюю версию средства подготовки файлов Win32 корпорации Майкрософт. В противном случае появится предупреждение о том, что приложение было упаковано с помощью более старой версии средства подготовки файлов Win32 корпорации Майкрософт. 

3. Завершив настройку, нажмите кнопку **ОК**.

### <a name="step-3-configure-app-information"></a>Шаг 3 Настройка сведений о приложении

1. В области **Добавить приложение** выберите **Сведения о приложении** для настройки приложения.
2. На панели **Сведения о приложении** настройте следующие сведения. Некоторые значения в этой области могут заполняться автоматически.
    - **Имя**. Введите имя приложения так, как оно будет отображаться на корпоративном портале. Если два приложения имеют одно и то же имя, на корпоративном портале будут отображаться оба приложения.
    - **Описание** Введите описание приложения. Описание отображается на корпоративном портале.
    - **Издатель**. Введите имя издателя приложения.
    - **Категория**. Выберите одну или несколько встроенных категорий приложений или созданную категорию. Категории облегчают поиск приложения при просмотре пользователями корпоративного портала.
    - **Отобразить это приложение в рекомендуемых на Корпоративном портале**. Отображать приложение на видном месте главной страницы корпоративного портала при просмотре приложений пользователями.
    - **URL-адрес сведений**. При необходимости можно ввести URL-адрес веб-сайта со сведениями об этом приложении. URL-адрес отображается на корпоративном портале.
    - **URL-адрес политики конфиденциальности**. При необходимости можно ввести URL-адрес веб-сайта со сведениями о политике конфиденциальности для этого приложения. URL-адрес отображается на корпоративном портале.
    - **Разработчик**. При необходимости введите имя разработчика приложения.
    - **Имя владельца**. При необходимости введите имя владельца приложения. Например, **Отдел кадров**.
    - **Заметки**. Введите любые заметки, которые нужно связать с этим приложением.
    - **Логотип**. Загрузите значок, который будет связан с приложением. Этот значок будет отображаться с приложением при просмотре пользователями корпоративного портала.
3. Завершив настройку, нажмите кнопку **ОК**.

### <a name="step-4-configure-app-installation-details"></a>Шаг 4. Настройка сведений об установке приложения
1. В панели **Добавить приложение** выберите **Программа**, чтобы настроить команды для установки и удаления приложения.
2. Добавьте полную строку команды установки для установки приложения. 

    Например, если имя файла приложения — **MyApp123**, добавьте следующее:<br>
    `msiexec /p “MyApp123.msp”`<p>
    Если приложением является `ApplicationName.exe`, в команде будет указано имя приложения, за которым следуют аргументы командной строки (параметры), поддерживаемые пакетом. <br>Пример.<br>
    `ApplicationName.exe /quiet`<br>
    В приведенной выше команде пакет `ApplicationName.exe` поддерживает аргумент команды `/quiet`.<p> 
    Чтобы узнать, какие аргументы поддерживает пакет приложения, обратитесь к поставщику приложения.

3. Добавьте полную строку команды удаления для удаления приложения на основе его идентификатора GUID. 

    Например: `msiexec /x “{12345A67-89B0-1234-5678-000001000000}”`

    > [!NOTE]
    > Приложения Win32 можно настроить для установки в контексте **пользователя** или **системы**. Контекст **пользователя** связан только с данным конкретным пользователем. Контекст **системы** относится ко всем пользователям устройства Windows 10.
    >
    > Конечным пользователям не требуется выполнять вход на устройство для установки приложений Win32.
    > 
    > Установка и удаление приложений Win32 будет выполняться с правами администратора (по умолчанию), если для приложения настроена установка в контексте пользователя, а пользователь на устройстве имеет права администратора.

4. Завершив настройку, нажмите кнопку **ОК**.

### <a name="step-5-configure-app-requirements"></a>Шаг 5. Настройка требований приложения

1. В панели **Добавить приложение** выберите **Требования**, чтобы настроить требования, которым должны соответствовать устройства перед установкой приложения.
2. На панели **Добавление правила требований** настройте приведенные ниже сведения. Некоторые значения в этой области могут заполняться автоматически.
    - **Архитектура операционной системы**. Выберите архитектуры, необходимые для установки приложения.
    - **Минимальная версия операционной системы**. Выберите минимальную версию операционной системы, необходимую для установки приложения.
    - **Требуемое дисковое пространство (МБ)** . При необходимости укажите свободное дисковое пространство, требуемое для установки приложения.
    - **Требуемая физическая память (МБ)** . При необходимости укажите объем физической памяти (ОЗУ), необходимый для установки приложения.
    - **Требуемое минимальное число логических процессоров**. При необходимости укажите минимальное число логических процессоров, требуемое для установки приложения.
    - **Требуемая минимальная скорость ЦП (МГц)** . При необходимости укажите минимальную скорость ЦП, требуемую для установки приложения.

3. Нажмите кнопку **Добавить**, чтобы отобразить колонку **Добавление правила требований** и настроить дополнительные правила требований. Щелкните **Тип требования** для выбора типа правила, используемого для определения способа проверки требования. Правила требований могут быть основаны на сведениях о файловой системе, значениях реестра или скриптах PowerShell. 
    - **Файл**. Если в качестве значения параметра **Тип требования** выбрано **Файл**, правило требований должно обнаруживать файл или папку, дату, версию или размер. 
        - **Путь** — полный путь к папке, содержащей файл или папку для обнаружения.
        - **Файл или папка** — файл или папка для обнаружения.
        - **Свойство** — выберите тип правила, используемый для проверки наличия приложения.
        - **Связан с 32-разрядным приложением на 64-разрядных клиентах** — выберите **Да** для развертывания переменных среды path в 32-разрядном контексте на 64-разрядных клиентах. Выберите **Нет** (по умолчанию) для развертывания переменных path в 64-разрядном контексте на 64-разрядных клиентах. 32-разрядные клиенты всегда будут использовать 32-разрядный контекст.
    - **Реестр**. Если в качестве значения параметра **Тип требования** выбрано **Реестр**, правило требований должно обнаруживать параметр реестра на основе значения, строки, целого числа или версии.
        - **Путь к разделу** — полный путь к записи реестра, содержащей значение для обнаружения.
        - **Имя значения** — имя значения реестра для обнаружения. Если это значение не указано, обнаружение будет выполняться в разделе. В качестве значения для обнаружения будет использоваться значение по умолчанию раздела, если выбран метод обнаружения, отличный от существования файла или папки.
        - **Требование раздела реестра** — выберите тип сравнения разделов реестра, используемый для определения способа проверки правила требований.
        - **Связан с 32-разрядным приложением на 64-разрядных клиентах** — выберите **Да** для поиска в 32-разрядном реестре на 64-разрядных клиентах. Выберите **Нет** (по умолчанию) для писка в 64-разрядном реестре на 64-разрядных клиентах. На 32-разрядных клиентах поиск всегда выполняется в 32-разрядном реестре.
    - **Скрипт**. Выберите **Скрипт** в качестве значения параметра **Тип требования**, если вам не удается создать правило требований на основе файла, реестра или любого другого метода, доступного в консоли Intune.
        - **Файл скрипта** — для правила требований на основе скрипта PowerShell: если код выхода равен 0, STDOUT будет определяться более подробно. Например, STDOUT может содержать целое число со значением 1.
        - **Запуск скрипта как 32-разрядного процесса на 64-разрядных клиентах** — выберите **Да** для запуска скрипта в 32-разрядных процессах на 64-разрядных клиентах. Выберите **Нет** (по умолчанию), чтобы запустить скрипт в 64-разрядном процессе на 64-разрядных клиентах. 32-разрядные клиенты запускают скрипт в 32-разрядном процессе.
        - **Запускать сценарий по учетным данным**. Выберите **Да** для запуска скрипта с помощью учетных данных устройства, с которого выполнен вход**.
        - **Применять проверку подписи скрипта** — выберите **Да** для проверки, подписан ли скрипт доверенным издателем. Такая подпись позволяет выполнение скрипта без отображения предупреждений и запросов. Скрипт будет выполняться разблокированным. Выберите **Нет** (по умолчанию), чтобы скрипт выполнялся с подтверждением пользователя без проверки подписи.
        - **Выберите тип выходных данных**. Выберите тип данных, используемый при определении совпадения правила требований.
4. Завершив настройку, нажмите кнопку **ОК**.

### <a name="step-6-configure-app-detection-rules"></a>Шаг 6. Настройка правил обнаружения приложений

1. В панели **Добавить приложение** выберите **Правила обнаружения**, чтобы настроить правила обнаружения присутствия приложения.
2. В поле **Формат правил** выберите, как будет обнаруживаться присутствие приложения. Вы можете вручную настроить правила обнаружения или использовать настраиваемый скрипт для обнаружения присутствия приложения. Необходимо выбрать хотя бы одно правило обнаружения. 

    > [!NOTE]
    > В панели **Правила обнаружения** можно добавить несколько правил. Для обнаружения приложения должны быть выполнены **все** правила.
    >
    > Если служба Intune обнаружит, что приложение отсутствует на устройстве, она снова предложит это приложение через 24 часа. Это будет происходить только для приложений с требуемым намерением.

    - **Вручную настроить правила обнаружения**. Можно выбрать один из следующих типов правил.
        1. **MSI** — проверка на основе проверки версии MSI. Этот тип правила можно добавить только один раз. При выборе этого типа правила имеются два параметра.
            - **Код продукта MSI** — добавьте допустимый код продукта MSI для приложения.
            - **Проверка версии продукта MSI** — выберите **Да**, чтобы в дополнение к коду продукта MSI проверялась и версия продукта MSI.
        2. **Файл** — проверка на основе обнаружения файла или папки по дате, версии или размеру.
            - **Путь** — полный путь к папке, содержащей файл или папку для обнаружения.
            - **Файл или папка** — файл или папка для обнаружения.
            - **Метод обнаружения** — выберите тип метода обнаружения, используемого для проверки наличия приложения.
            - **Связан с 32-разрядным приложением на 64-разрядных клиентах** — выберите **Да** для развертывания переменных среды path в 32-разрядном контексте на 64-разрядных клиентах. Выберите **Нет** (по умолчанию) для развертывания переменных path в 64-разрядном контексте на 64-разрядных клиентах. 32-разрядные клиенты всегда будут использовать 32-разрядный контекст.
            
            **Примеры обнаружения на основе файла**
            1. Проверка существования файла.
         
                ![Снимок экрана панели правила обнаружения — существование файла](./media/apps-win32-app-management/apps-win32-app-03.png)
        
            2. Проверка существования папки.
         
                ![Снимок экрана панели правила обнаружения — существование папки](./media/apps-win32-app-management/apps-win32-app-04.png)
        
        3. **Реестр** — проверка на основе значения, строки, целого числа или версии.
            - **Путь к разделу** — полный путь к записи реестра, содержащей значение для обнаружения.
            - **Имя значения** — имя значения реестра для обнаружения. Если это значение не указано, обнаружение будет выполняться в разделе. В качестве значения для обнаружения будет использоваться значение по умолчанию раздела, если выбран метод обнаружения, отличный от существования файла или папки.
            - **Метод обнаружения** — выберите тип метода обнаружения, используемого для проверки наличия приложения.
            - **Связан с 32-разрядным приложением на 64-разрядных клиентах** — выберите **Да** для поиска в 32-разрядном реестре на 64-разрядных клиентах. Выберите **Нет** (по умолчанию) для писка в 64-разрядном реестре на 64-разрядных клиентах. На 32-разрядных клиентах поиск всегда выполняется в 32-разрядном реестре.
            
            **Примеры обнаружения на основе реестра**
            1. Проверка существования раздела реестра.
            
                ![Снимок экрана панели правила обнаружения — существование раздела реестра](./media/apps-win32-app-management/apps-win32-app-05.png)    
            
            2. Проверьте, существует ли значение реестра.
        
                ![Снимок экрана панели правила обнаружения — существование значения реестра](./media/apps-win32-app-management/apps-win32-app-06.png)    
        
            3. Проверка на равенство строки значения реестра.
        
                ![Снимок экрана панели правила обнаружения — равенство строки значения реестра](./media/apps-win32-app-management/apps-win32-app-07.png)    
     
    - **Использование настраиваемого скрипта обнаружения** — укажите скрипт PowerShell, который будет использоваться для обнаружения этого приложения. 
    
        1. **Файл скрипта** — выберите скрипт PowerShell, который будет обнаруживать наличие приложения на клиенте. Приложение будет обнаружено, когда скрипт возвратит код выхода со значением 0 и запишет строковое значение в STDOUT.

        2. **Запуск скрипта как 32-разрядного процесса на 64-разрядных клиентах** — выберите **Да** для запуска скрипта в 32-разрядных процессах на 64-разрядных клиентах. Выберите **Нет** (по умолчанию), чтобы запустить скрипт в 64-разрядном процессе на 64-разрядных клиентах. 32-разрядные клиенты запускают скрипт в 32-разрядном процессе.

        3. **Применять проверку подписи скрипта** — выберите **Да** для проверки, подписан ли скрипт доверенным издателем. Такая подпись позволяет выполнение скрипта без отображения предупреждений и запросов. Скрипт будет выполняться разблокированным. Выберите **Нет** (по умолчанию), чтобы скрипт выполнялся с подтверждением пользователя без проверки подписи.
    
            Агент Intune проверяет результаты скрипта. Он также считывает значения, записанные сценарием в стандартный поток вывода (STDOUT), стандартный поток ошибок (STDERR) и код выхода. Если скрипт на выходе возвращает ненулевое значение, значит, он завершился неудачно и состояние обнаружения приложения неизвестно. Если код выхода равен нулю и STDOUT содержит данные, состояние обнаружения приложения имеет значение "Установлено". 

            > [!NOTE]
            > Корпорация Майкрософт рекомендует использовать для скрипта кодировку UTF-8. Если скрипт на выходе возвращает значение 0, то он выполнился успешно. Второй выходной канал указывает, что приложение обнаружено — данные STDOUT показывают, что приложение было найдено на клиенте. Мы не ищем конкретную строку в STDOUT.

        4. После добавления своих правил выберите **Добавить** > **ОК**.

### <a name="step-7-configure-app-return-codes"></a>Шаг 7. Настройка кодов возврата приложения

1. В панели **Добавить приложение** выберите **Коды возврата**, чтобы добавить коды возврата, используемые для указания поведения при повторных попытках установки приложения или поведения после установки. Записи кодов возврата добавляются по умолчанию при создании приложения. Однако вы можете добавить дополнительные коды возврата или изменить существующие. 
2. В панели **Коды возврата** добавьте дополнительные коды возврата или измените существующие.
    - **Failed** (Сбой) — возвращаемое значение, указывающее на сбой при установке приложения.
    - **Hard reboot** (Жесткая перезагрузка) — код возврата жесткой перезагрузки не разрешает установку на клиенте следующих приложений Win32 без перезагрузки. 
    - **Soft reboot** (Мягкая перезагрузка) — код возврата мягкой перезагрузки разрешает установку следующих приложений Win32 без перезагрузки клиента. Перезагрузка необходима для завершения установки текущего приложения.
    - **Retry** (Повтор) — код возврата повтора означает, что будут выполняться три попытки установки приложения. Ожидание между попытками будет длиться 5 минут. 
    - **Success** (Успех) — этот код возврата указывает, что приложение было успешно установлено.
3. После дополнения или изменения списка кодов возврата нажмите **ОК**.

### <a name="step-8-add-the-app"></a>Шаг 8. Добавление приложения

1. В области **Добавить приложение** проверьте правильность указанных сведений о приложении.
2. Выберите **Добавить**, чтобы отправить приложение в Intune.

### <a name="step-9-assign-the-app"></a>Шаг 9. Назначение приложения

1. В панели приложения выберите **Назначения**.
2. Выберите **Добавить группу**, чтобы открыть область **Добавить группу** для этого приложения.
3. Выберите **Тип назначения** для конкретного приложения.
    - **Available for enrolled devices** (Доступно для зарегистрированных устройств). Пользователи устанавливают приложение с приложения Корпоративного портала или веб-сайта Корпоративного портала.
    - **Обязательно.** Приложение устанавливается на устройствах в выбранных группах.
    - **Удалить**. Приложение удаляется из устройств в выбранных группах.
4. Выберите **Включенные группы** и назначьте группы, которые будут использовать это приложение.
5. На панели **Назначить** выберите **ОК**, чтобы завершить выбор включенных групп.
6. Щелкните **Исключить группы**, если вы хотите исключить из назначения приложения какие-либо группы пользователей.
7. На панели **Добавить группу** нажмите кнопку **OK**.
8. На панели **Назначения** выберите **Сохранить**.

Теперь вы выполнили все действия для добавления приложения Win32 в Intune. Сведения о назначении и мониторинге приложений см. в статьях [Назначение приложений группам с помощью Microsoft Intune](apps-deploy.md) и [Отслеживание сведений о приложении и его назначениях с помощью Microsoft Intune](apps-monitor.md).

## <a name="app-dependencies"></a>Зависимости приложения

Зависимости приложения — это приложения, которые должны быть установлены перед установкой приложения Win32. Можно указать, что другие приложения устанавливаются как зависимости. В частности, зависимые приложения необходимо установить на устройстве перед установкой приложения Win32. Можно использовать не более 100 зависимостей, включая зависимости включенных зависимостей и самого приложения. Зависимости приложения Win32 следует добавлять только после добавления и отправки приложения Win32 в Intune. После добавления приложения Win32 вы увидите параметр **Зависимости** в колонке приложения Win32. 

Все зависимости приложений Win32 должны быть также приложением Win32. Зависимость от других типов приложений, таких как одиночные бизнес-приложения MSI или приложения Магазина, не поддерживается.

При добавлении зависимости приложения можно выполнить поиск по имени приложения и издателю. Кроме того, можно отсортировать зависимости по имени приложения и издателю. Ранее добавленные зависимости приложения нельзя выбрать в списке добавленных зависимостей. 

Вы можете указать, следует ли автоматически устанавливать каждое зависимое приложение. По умолчанию параметру **Автоматическая установка** задано значение **Да** для каждой зависимости. Intune автоматически установит зависимое приложение, даже если оно не предназначено для пользователя или устройства, в соответствии с условием зависимости перед установкой приложения Win32. Важно отметить, что зависимость может иметь рекурсивные дополнительные зависимости, и каждая такая зависимость будет устанавливаться перед установкой основной зависимости. Кроме того, при установке зависимостей не соблюдается порядок установки на заданном уровне зависимости.

Чтобы добавить зависимость приложения в приложение Win32, выполните следующие действия.

1. В Intune выберите **Клиентские приложения** > **Приложения**, чтобы просмотреть список добавленных клиентских приложений. 
2. Выберите добавленное **приложение Windows (Win32)** . 
3. Выберите **Зависимости**, чтобы добавить зависимые приложения, которые должны быть установлены перед установкой приложения Win32. 
4. Нажмите кнопку **Добавить** для добавления зависимости приложения.
5. Добавив зависимые приложения, нажмите **Выбрать**.
6. Решите, следует ли устанавливать зависимое приложение автоматически, выбрав **Да** или **Нет** в разделе **Автоматическая установка**.
7. Нажмите кнопку **Сохранить**.

Конечный пользователь увидит всплывающие уведомления Windows, информирующие о скачивании и установке зависимых приложений в ходе процесса установки приложения Win32. Кроме того, если зависимое приложение не установлено, будет выведено одно из следующих уведомлений:
- Установить некоторые зависимые приложения не удалось.
- Некоторые требования зависимых приложений не выполнены.
- Некоторые зависимые приложения ожидают перезагрузки устройства.

Если вы решили не выполнять **автоматическую установку** зависимости, попытка установки приложения Win32 предпринята не будет. В отчете по приложению будет указано, что зависимость была помечена как `failed`, и приведена причина сбоя. Чтобы просмотреть сведения об ошибке установки зависимости, щелкните соответствующую ссылку (или предупреждение) в колонке [Сведения об установке](troubleshoot-app-install.md#win32-app-installation-troubleshooting) для приложения Win 32. 

Каждая зависимость будет соответствовать логике повторных попыток приложения Win32 в Intune (попробуйте установить приложение 3 раза после ожидания в течение 5 минут) и глобальному расписанию повторной оценки. Кроме того, зависимости применяются только во время установки приложения Win32 на устройстве. Зависимости не применяются для удаления приложения Win32. Чтобы удалить зависимость, щелкните многоточие (три точки) слева от зависимого приложения, находящегося в конце строки списка зависимостей. 

## <a name="delivery-optimization"></a>Оптимизация доставки

Клиенты Windows 10 версии 1709 и выше будут скачивать содержимое приложения Win32 Intune с помощью компонента оптимизации доставки на клиенте Windows 10. Оптимизация доставки включает возможности одноранговой доставки, включенные по умолчанию. Оптимизацию доставки можно настроить с помощью групповой политики и конфигурации устройств Intune. См. дополнительные сведения об [оптимизации доставки для Windows 10](https://docs.microsoft.com/windows/deployment/update/waas-delivery-optimization). 

## <a name="install-required-and-available-apps-on-devices"></a>Установка необходимых и доступных приложений на устройства

Пользователям будут отображаться всплывающие уведомления Windows о необходимых и доступных установках приложений. На следующем рисунке показан пример всплывающего уведомления, где установка приложения будет завершена только после перезагрузки устройства. 

![Снимок экрана: всплывающие уведомления Windows для установки приложения](./media/apps-win32-app-management/apps-win32-app-08.png)    

На следующем рисунке уведомление сообщает пользователю, что на устройстве изменяются приложения.

![Снимок экрана с уведомлением о внесении изменений в приложение](./media/apps-win32-app-management/apps-win32-app-09.png)    

## <a name="toast-notifications-for-win32-apps"></a>Всплывающие уведомления для приложений Win32 
При необходимости вы можете настроить игнорирование пользовательских всплывающих уведомлений пользователя для каждого назначения приложения. В Intune выберите **Клиентские приложения** > **Приложения** > выберите приложение > **Назначения** > **Включить группы**. 

> [!NOTE]
> Приложения Win32, установленные с помощью расширения управления Intune, не будут удалены на незарегистрированных устройствах. Администраторы могут использовать исключение назначения, чтобы не предлагать установку приложений Win32 на устройствах BYOD.

## <a name="troubleshoot-win32-app-issues"></a>Устранение неполадок приложений Win32
Журналы агентов на клиентском компьютере обычно находятся в папке `C:\ProgramData\Microsoft\IntuneManagementExtension\Logs`. Для просмотра этих файлов журналов можно использовать `CMTrace.exe`. Программу *CMTrace.exe* можно скачать в разделе [клиентских инструментов Configuration Manager](https://docs.microsoft.com/sccm/core/support/tools). 

![Снимок экрана: журналы агентов на клиентском компьютере](./media/apps-win32-app-management/apps-win32-app-10.png)    

> [!IMPORTANT]
> Чтобы обеспечить правильную установку и выполнение бизнес-приложений Win32, в параметрах защиты от вредоносного ПО следует исключить из проверки указанные далее каталоги.<p>
> **На клиентских компьютерах X64**:<br>
> *C:\Program Files (x86)\Microsoft Intune Management Extension\Content*<br>
> *C:\windows\IMECache*
>  
> **На клиентских компьютерах X86**:<br>
> *C:\Program Files\Microsoft Intune Management Extension\Content*<br>
> *C:\windows\IMECache*

### <a name="detecting-the-win32-app-file-version-using-powershell"></a>Обнаружение версии файла Win32 приложения с помощью PowerShell

Если вам не удается определить версию файла Win32 приложения, рекомендуется использовать или адаптировать следующую команду PowerShell:

``` PowerShell

$FileVersion = [System.Diagnostics.FileVersionInfo]::GetVersionInfo("<path to binary file>").FileVersion
#The below line trims the spaces before and after the version name
$FileVersion = $FileVersion.Trim();
if ("<file version of successfully detected file>" -eq $FileVersion)
{
#Write the version to STDOUT by default
$FileVersion
exit 0
}
else
{
#Exit with non-zero failure code
exit 1
}
```

В приведенной выше команде PowerShell замените `<path to binary file>` на путь к файлу приложения Win32. Путь будет аналогичен приведенному ниже:<br>
`C:\Program Files (x86)\Microsoft SQL Server Management Studio 18\Common7\IDE\ssms.exe`

Кроме того, замените `<file version of successfully detected file>` на версию файла, которую необходимо обнаружить. Пример строки версии файла будет аналогичен следующему:<br>
`2019.0150.18118.00 ((SSMS_Rel).190420-0019)`

Если вам нужно получить сведения о версии приложения Win32, можно использовать следующую команду PowerShell:

``` PowerShell

[System.Diagnostics.FileVersionInfo]::GetVersionInfo("<path to binary file>").FileVersion

```

В приведенной выше команде PowerShell замените `<path to binary file>` на путь к файлу.

### <a name="additional-troubleshooting-areas-to-consider"></a>Другие области устранения неполадок, на которые следует обратить внимание
- Проверьте конечные объекты, чтобы убедиться, что агент установлен на устройстве — приложение Win32, предназначенное группе, или скрипт PowerShell, предназначенный группе, будет создавать политику установки агента для группы безопасности.
- Проверьте версию ОС — Windows 10 версии 1607 и более поздних версий.  
- Проверьте номер SKU Windows 10 — Windows 10 S, или версии Windows, работающие с включенным режимом S-режиме, не поддерживают установку MSI.

Дополнительные сведения об устранении неполадок, связанных с установкой приложений Win32, см. в разделе [Устранение проблем с установкой приложений Win32](troubleshoot-app-install.md#win32-app-installation-troubleshooting).

## <a name="next-steps"></a>Дальнейшие шаги

- Дополнительные сведения о добавлении приложений в Intune см. в разделе [Добавление приложений в Microsoft Intune](apps-add.md).
