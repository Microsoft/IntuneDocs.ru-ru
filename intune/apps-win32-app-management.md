---
title: Добавление приложений Win32 в Microsoft Intune
titlesuffix: ''
description: Узнайте, как добавлять, предоставлять и администрировать приложения Win32 в Microsoft Intune. В этой статье описано, как выполнять доставку и администрирование приложений Intune Win32, а также представлены сведения об устранении неполадок приложений Win32.
keywords: ''
author: Erikre
ms.author: erikre
manager: dougeby
ms.date: 11/15/2018
ms.topic: article
ms.prod: ''
ms.service: microsoft-intune
ms.technology: ''
ms.assetid: efdc196b-38f3-4678-ae16-cdec4303f8d2
ms.reviewer: mghadial
ms.suite: ems
search.appverid: MET150
ms.custom: intune-azure
ms.openlocfilehash: 0dc1974a57e5a5aa6808936c37e02fd31a7cac7b
ms.sourcegitcommit: 51b763e131917fccd255c346286fa515fcee33f0
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/20/2018
ms.locfileid: "52187300"
---
# <a name="intune-standalone---win32-app-management-public-preview"></a>Изолированная среда Intune — управление приложениями Win32 (предварительная версия)

Изолированная среда Intune предоставляет больше возможностей управления приложениями Win32. Хотя клиенты, подключенные к облаку, могут использовать Configuration Manager для управления приложениями Win32, пользователи только Intune будут иметь больше возможностей управления своими бизнес-приложениями Win32. В этой статье описана функция управления приложениями Win32 Intune и приведены сведения об устранении неполадок.

## <a name="prerequisites-for-public-preview"></a>Необходимые условия для общедоступной предварительной версии

- Windows 10 Корпоративная версии 1607 или более поздней
- Клиент Windows 10 должен быть: 
    - присоединен к Azure Active Directory (AAD) или к гибридной Azure Active Directory и
    - зарегистрирован в Intune (управляемый MDM)
- Размер приложения Windows в общедоступной предварительной версии не может превышать 8 ГБ 

> [!NOTE]
> Мы сейчас тестируем выпуски Pro и для образовательных учреждений Windows 10 версии 1607 и будем рады получить ваши отзывы.


## <a name="prepare-the-win32-app-content-for-upload"></a>Подготовка к отправке содержимого приложения Win32

Для предварительной обработки приложений Win32 используйте [инструмент подготовки отправки приложений Win32 Microsoft Intune](https://github.com/Microsoft/Intune-Win32-App-Packaging-Tool). Этот инструмент упаковки преобразует файлы установки приложения в формат *.intunewin*. Этот инструмент также обнаруживает некоторые атрибуты, необходимые Intune для определения состояния установки приложения. После использования этого инструмента в папке установщика приложения вы сможете создать приложение Win32 в консоли Intune.

[Инструмент подготовки отправки приложений Win32 Microsoft Intune](https://github.com/Microsoft/Intune-Win32-App-Packaging-Tool) можно загрузить с GitHub.

### <a name="available-command-line-parameters"></a>Возможные параметры командной строки 

|    **Параметр командной строки**    |    **Описание**    |
|:------------------------------:|:----------------------------------------------------------:|
|    `-h`     |    Справка    |
|    `-c <setup_folder>`     |    Папка установки для всех файлов установки.    |
|   ` -s <setup_file>`     |    Файл установки (такой как *setup.exe* или *setup.msi*).    |
|    `-o <output_folder>`     |    Выходная папка для создаваемого файла с расширением *.intunewin*.    |
|    `-q`       |    Тихий режим    |

### <a name="example-commands"></a>Примеры команд

|    **Пример команды**    |    **Описание**    |
|:-----------------------------------------------------------------------------------------:|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------:|
|    `IntuneWinAppUtil -h`    |    Эта команда отображает информацию об инструменте.    |
|    `IntuneWinAppUtil -c <setup_folder> -s <source_setup_file> -o <output_folder> <-q>`    |    Эта команда создает файл `.intunewin` из указанной исходной папки и файла установки. Для MSI-файла установки этот инструмент будет извлекать сведения, необходимые для Intune. Если указан параметр `-q`, команда выполняется в тихом режиме; если выходной файл уже существует, он будет перезаписан. Кроме того, если выходная папка не существует, она будет создана автоматически.    |

Создавая файл с расширением *.intunewin*, поместите все файлы, на которые создается ссылка, во вложенную папку в папке установки. Затем используйте относительный путь для создания ссылки на требуемый файл. Пример.

**Исходная папка установки:** *c:\testapp\v1.0*.<br>
**Файл лицензии:** *c:\testapp\v1.0\licenses\license.txt*.

Создайте ссылку на файл *license.txt*, используя относительный путь *licenses\license.txt*.

## <a name="create-assign-and-monitor-a-win32-app"></a>Создание, назначение и мониторинг приложения Win32

Подобно бизнес-приложениям (LOB), можно добавить приложение Win32 в Microsoft Intune. Приложения такого типа обычно создаются самостоятельно или сторонними разработчиками. Ниже приведены инструкции, которые помогут вам добавить приложение Windows в Intune.

### <a name="step-1-specify-the-software-setup-file"></a>Шаг 1. Выбор файла установки программного обеспечения

1.  Войдите на [портал Azure](https://portal.azure.com/).
2.  Выберите **Все службы** > **Intune**. Intune находится в разделе **Мониторинг и управление**.
3.  В панели **Intune** выберите **Клиентские приложения** > **Приложения** > **Добавить**.
4.  В панели **Добавить приложение** выберите в раскрывающемся списке **Приложение Windows (Win32) — предварительная версия**.

    ![Снимок экрана. Раскрывающийся список "Добавить тип" в панели добавления приложения](./media/apps-win32-app-01.png)

### <a name="step-2-upload-the-app-package-file"></a>Шаг 2. Отправка файла пакета приложения

1.  В панели **Добавить приложение** выберите **Файл пакета приложения**, чтобы выбрать файл. Появится панель файла пакета приложения.

    ![Снимок экрана. Панель файла пакета приложения](./media/apps-win32-app-02.png)

2.  В области **Файл пакета приложения** нажмите кнопку обзора. Затем выберите файл установки Windows с расширением *.intunewin*.
3.  Завершив настройку, нажмите кнопку **ОК**.

### <a name="step-3-configure-app-information"></a>Шаг 3. Настройка сведений о приложении

1.  В области **Добавить приложение** выберите **Сведения о приложении** для настройки приложения.
2.  На панели **Сведения о приложении** настройте следующие сведения. Некоторые значения в этой области могут заполняться автоматически.
    - **Имя**: введите имя приложения так, как оно будет отображаться на корпоративном портале. Если два приложения имеют одно и то же имя, на корпоративном портале будут отображаться оба приложения.
    - **Описание**: введите описание приложения. Описание отображается на корпоративном портале.
    - **Издатель**: введите имя издателя приложения.
    - **Категория**: выберите одну или несколько встроенных категорий приложений или созданную категорию. Категории облегчают поиск приложения при просмотре пользователями корпоративного портала.
    - **Display this as a featured app in the Company Portal** (Отобразить это приложение в рекомендуемых на корпоративном портале): выберите этот параметр, чтобы приложение отображалось на видном месте на главной странице корпоративного портала, когда пользователи просматривают приложения.
    - **URL-адрес сведений** (необязательно): введите URL-адрес веб-сайта со сведениями об этом приложении. URL-адрес отображается на корпоративном портале.
    - **URL-адрес политики конфиденциальности** (необязательно): введите URL-адрес веб-сайта со сведениями о политике конфиденциальности для этого приложения. URL-адрес отображается на корпоративном портале.
    - **Разработчик** (необязательно): введите имя разработчика приложения.
    - **Владелец** (необязательно): введите имя владельца приложения. Например, **Отдел кадров**.
    - **Заметки**: введите любые заметки, которые нужно связать с этим приложением.
    - **Логотип**: добавьте значок, который будет связан с приложением. Этот значок будет отображаться с приложением при просмотре пользователями корпоративного портала.
3.  Завершив настройку, нажмите кнопку **ОК**.

### <a name="step-4-configure-app-installation-details"></a>Шаг 4. Настройка сведений об установке приложения
1.  В панели **Добавить приложение** выберите **Программа**, чтобы настроить команды для установки и удаления приложения.
2.  Добавьте полную строку команды установки для установки приложения. 

    Например, если имя файла приложения — **MyApp123**, добавьте следующее: `msiexec /i “MyApp123.msi”`

3.  Добавьте полную строку команды удаления для удаления приложения на основе его идентификатора GUID. 

    Пример: `msiexec /x “{12345A67-89B0-1234-5678-000001000000}”`

    > [!NOTE]
    > Приложения Win32 можно настроить для установки в контексте **пользователя** или **системы**. Контекст **пользователя** связан только с данным конкретным пользователем. Контекст **системы** относится ко всем пользователям устройства Windows 10.
    >
    > Конечным пользователям не требуется выполнять вход на устройство для установки приложений Win32.

4.  Завершив настройку, нажмите кнопку **ОК**.

### <a name="step-5-configure-app-requirements"></a>Шаг 5. Настройка требований приложения

1.  В панели **Добавить приложение** выберите **Требования**, чтобы настроить требования, которым должны соответствовать устройства перед установкой приложения.
2.  В панели **Требования** настройте следующие сведения. Некоторые значения в этой области могут заполняться автоматически.
    - **Архитектура операционной системы**: выберите архитектуры, необходимые для установки приложения.
    - **Минимальная версия операционной системы**: выберите минимальную версию операционной системы, необходимую для установки приложения.
    - **Требуемое дисковое пространство (МБ)**: при необходимости укажите свободное дисковое пространство, требуемое для установки приложения.
    - **Требуемая физическая память (МБ)**: при необходимости укажите объем физической памяти (ОЗУ), необходимый для установки приложения.
    - **Требуемое минимальное число логических процессоров**: при необходимости укажите минимальное число логических процессоров, требуемое для установки приложения.
    - **Требуемая минимальная скорость ЦП (МГц)**: при необходимости укажите минимальную скорость ЦП, требуемую для установки приложения.
3.  Завершив настройку, нажмите кнопку **ОК**.

### <a name="step-6-configure-app-detection-rules"></a>Шаг 6. Настройка правил обнаружения приложений

1.  В панели **Добавить приложение** выберите **Правила обнаружения**, чтобы настроить правила обнаружения присутствия приложения.
2.  В поле **Формат правил** выберите, как будет обнаруживаться присутствие приложения. Вы можете вручную настроить правила обнаружения или использовать настраиваемый скрипт для обнаружения присутствия приложения. Необходимо выбрать хотя бы одно правило обнаружения. 

    > [!NOTE]
    > В панели **Правила обнаружения** можно добавить несколько правил. Для обнаружения приложения должны быть выполнены **все** правила.

    - **Вручную настроить правила обнаружения**. Можно выбрать один из следующих типов правил.
        1.  **MSI** — проверка на основе проверки версии MSI. Этот тип правила можно добавить только один раз. При выборе этого типа правила имеются два параметра.
            - **Код продукта MSI** — добавьте допустимый код продукта MSI для приложения.
            - **Проверка версии продукта MSI** — выберите **Да**, чтобы в дополнение к коду продукта MSI проверялась и версия продукта MSI.
        2.  **Файл** — проверка на основе обнаружения файла или папки по дате, версии или размеру.
            - **Путь** — полный путь к папке, содержащей файл или папку для обнаружения.
            - **Файл или папка** — файл или папка для обнаружения.
            - **Метод обнаружения** — выберите тип метода обнаружения, используемого для проверки наличия приложения.
            - **Связан с 32-разрядным приложением на 64-разрядных клиентах** — выберите **Да** для развертывания переменных среды path в 32-разрядном контексте на 64-разрядных клиентах. Выберите **Нет** (по умолчанию) для развертывания переменных path в 64-разрядном контексте на 64-разрядных клиентах. 32-разрядные клиенты всегда будут использовать 32-разрядный контекст.
            
            **Примеры обнаружения на основе файла**
            1.  Проверка существования файла.
         
                ![Снимок экрана панели правила обнаружения — существование файла](./media/apps-win32-app-03.png)
        
            2.  Проверка существования папки.
         
                ![Снимок экрана панели правила обнаружения — существование папки](./media/apps-win32-app-04.png)
        
        3. **Реестр** — проверка на основе значения, строки, целого числа или версии.
            - **Путь к разделу** — полный путь к записи реестра, содержащей значение для обнаружения.
            - **Имя значения** — имя значения реестра для обнаружения. Если это значение не указано, обнаружение будет выполняться в разделе. В качестве значения для обнаружения будет использоваться значение по умолчанию раздела, если выбран метод обнаружения, отличный от существования файла или папки.
            - **Метод обнаружения** — выберите тип метода обнаружения, используемого для проверки наличия приложения.
            - **Связан с 32-разрядным приложением на 64-разрядных клиентах** — выберите **Да** для поиска в 32-разрядном реестре на 64-разрядных клиентах. Выберите **Нет** (по умолчанию) для писка в 64-разрядном реестре на 64-разрядных клиентах. На 32-разрядных клиентах поиск всегда выполняется в 32-разрядном реестре.
            
            **Примеры обнаружения на основе реестра**
            1.  Проверка существования раздела реестра.
            
                ![Снимок экрана панели правила обнаружения — существование раздела реестра](./media/apps-win32-app-05.png)    
            
            2.  Проверка на существование значения реестра (**недоступна в предварительной версии**).
        
                ![Снимок экрана панели правила обнаружения — существование значения реестра](./media/apps-win32-app-06.png)    
        
            3.  Проверка на равенство строки значения реестра.
        
                ![Снимок экрана панели правила обнаружения — равенство строки значения реестра](./media/apps-win32-app-07.png)    
     
    - **Использование настраиваемого скрипта обнаружения** — укажите скрипт PowerShell, который будет использоваться для обнаружения этого приложения. 
    
        1.  **Файл скрипта** — выберите скрипт PowerShell, который будет обнаруживать наличие приложения на клиенте. Приложение будет обнаружено, когда скрипт возвратит код выхода со значением 0 и запишет строковое значение в STDOUT.
        2.  **Запуск скрипта как 32-разрядного процесса на 64-разрядных клиентах** — выберите **Да** для запуска скрипта с использованием учетных данных выполнившего вход пользователя. Выберите **Нет** (по умолчанию) для запуска скрипта в контексте системы.
        3.  **Применять проверку подписи скрипта** — выберите **Да** для проверки, подписан ли скрипт доверенным издателем. Такая подпись позволяет выполнение скрипта без отображения предупреждений и запросов. Скрипт будет выполняться разблокированным. Выберите **Нет** (по умолчанию), чтобы скрипт выполнялся с подтверждением пользователя без проверки подписи.
    
        Intune sidecar проверяет результаты скрипта. Он также считывает значения, записанные сценарием в стандартный поток вывода (STDOUT), стандартный поток ошибок (STDERR) и код выхода. Если скрипт на выходе возвращает ненулевое значение, значит, он завершился неудачно и состояние обнаружения приложения неизвестно. Если код выхода равен нулю и STDOUT содержит данные, состояние обнаружения приложения имеет значение "Установлено". 
    
        > [!NOTE]
        > Если скрипт на выходе возвращает значение 0, то он выполнился успешно. Второй выходной канал указывает, что приложение обнаружено — данные STDOUT показывают, что приложение было найдено на клиенте. Мы не ищем конкретную строку в STDOUT.
    
3.  После добавления своих правил выберите **Добавить** > **ОК**.

### <a name="step-7-configure-app-return-codes"></a>Шаг 7. Настройка кодов возврата приложения

1.  В панели **Добавить приложение** выберите **Коды возврата**, чтобы добавить коды возврата, используемые для указания поведения при повторных попытках установки приложения или поведения после установки. Записи кодов возврата добавляются по умолчанию при создании приложения. Однако вы можете добавить дополнительные коды возврата или изменить существующие. 
2.  В панели **Коды возврата** добавьте дополнительные коды возврата или измените существующие.
    - **Failed** (Сбой) — возвращаемое значение, указывающее ошибку установки приложения.
    - **Hard reboot** (Жесткая перезагрузка) — код возврата жесткой перезагрузки не разрешает установку на клиенте следующих приложений Win32 без перезагрузки. 
    - **Soft reboot** (Мягкая перезагрузка) — код возврата мягкой перезагрузки разрешает установку следующих приложений Win32 без перезагрузки клиента. Перезагрузка необходима для завершения установки текущего приложения.
    - **Retry** (Повтор) — код возврата повтора означает, что будут выполняться три попытки установки приложения. Ожидание между попытками будет длиться 5 минут. 
    - **Success** (Успех) — этот код возврата указывает, что приложение было успешно установлено.
3.  После дополнения или изменения списка кодов возврата нажмите **ОК**.

### <a name="step-8-add-the-app"></a>Шаг 8. Добавление приложения

1.  В области **Добавить приложение** проверьте правильность указанных сведений о приложении.
2.  Выберите **Добавить**, чтобы отправить приложение в Intune.

### <a name="step-9-assign-the-app"></a>Шаг 9. Назначение приложения

1.  В панели приложения выберите **Назначения**.
2.  Выберите **Добавить группу**, чтобы открыть область **Добавить группу** для этого приложения.
3.  Выберите **Тип назначения** для конкретного приложения.
    - **Доступно для зарегистрированных устройств**: пользователи могут устанавливать приложение через приложение или веб-сайт корпоративного портала.
    - **Обязательно.** Приложение устанавливается на устройствах в выбранных группах.
    - **Удалить.** Приложение удаляется из устройств в выбранных группах.
4.  Выберите **Включенные группы** и назначьте группы, которые будут использовать это приложение.
5.  На панели **Назначить** выберите **ОК**, чтобы завершить выбор включенных групп.
6.  Щелкните **Исключить группы**, если вы хотите исключить из назначения приложения какие-либо группы пользователей.
7.  На панели **Добавить группу** нажмите кнопку **OK**.
8.  На панели **Назначения** выберите **Сохранить**.

Теперь вы выполнили все действия для добавления приложения Win32 в Intune. Сведения о назначении и мониторинге приложений см. в статьях [Назначение приложений группам с помощью Microsoft Intune](https://docs.microsoft.com/intune/apps-deploy) и [Отслеживание сведений о приложении и его назначениях с помощью Microsoft Intune](https://docs.microsoft.com/intune/apps-monitor).

## <a name="install-required-and-available-apps-on-devices"></a>Установка необходимых и доступных приложений на устройства

Конечным пользователям будут отображаться всплывающие уведомления Windows о необходимых и доступных установках приложений. На следующем рисунке показан пример всплывающего уведомления, где установка приложения будет завершена только после перезагрузки устройства. 

![Снимок экрана. Пример всплывающего уведомления Windows для установки приложения](./media/apps-win32-app-08.png)    

На следующем рисунке уведомление сообщает пользователю, что на устройстве изменяются приложения.

![Снимок экрана. Пример уведомления пользователя о том, что на устройстве выполняются изменения приложений](./media/apps-win32-app-09.png)    

## <a name="troubleshoot-win32-app-issues"></a>Устранение неполадок приложений Win32
Журналы агентов на клиентском компьютере обычно находятся в папке `C:\ProgramData\Microsoft\IntuneManagementExtension\Logs`. Для просмотра этих файлов журналов можно использовать `CMTrace.exe`. Программу *CMTrace.exe* можно загрузить в разделе [клиентских инструментов SCCM](https://docs.microsoft.com/sccm/core/support/tools). 

![Снимок экрана. Журналы агентов](./media/apps-win32-app-10.png)    

### <a name="troubleshooting-areas-to-consider"></a>Области устранения неполадок, на которые следует обратить внимание
- Проверьте конечные объекты, чтобы убедиться, что агент установлен на устройстве — приложение Win32, предназначенное группе, или скрипт PowerShell, предназначенный группе, будет создавать политику установки агента для группы безопасности.
- Проверьте версию ОС — Windows 10 версии 1607 и более поздних версий.  
- Проверьте номер SKU Windows 10 — Windows 10 S, или версии Windows, работающие с включенным режимом S-режиме, не поддерживают установку MSI.

## <a name="next-steps"></a>Дальнейшие шаги

- Дополнительные сведения о добавлении приложений в Intune см. в разделе [Добавление приложений в Microsoft Intune](apps-add.md).
