---
title: Добавление политик конфигурации приложений для управляемых устройств iOS
titlesuffix: Microsoft Intune
description: Узнайте о том, как предоставлять данные конфигурации при работе с приложением iOS, используя политики конфигурации приложений.
keywords: ''
author: Erikre
ms.author: erikre
manager: dougeby
ms.date: 10/11/2018
ms.topic: article
ms.prod: ''
ms.service: microsoft-intune
ms.technology: ''
ms.assetid: c9163693-d748-46e0-842a-d9ba113ae5a8
ms.reviewer: mghadial
ms.suite: ems
search.appverid: MET150
ms.custom: intune-azure
ms.openlocfilehash: dd18b882af8c685bb640468ef7076ed6317126a5
ms.sourcegitcommit: 51b763e131917fccd255c346286fa515fcee33f0
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/20/2018
ms.locfileid: "52184613"
---
# <a name="add-app-configuration-policies-for-managed-ios-devices"></a>Добавление политик конфигурации приложений для управляемых устройств iOS

[!INCLUDE [azure_portal](./includes/azure_portal.md)]

Используйте политики конфигурации приложений в Microsoft Intune, чтобы задать настраиваемые параметры конфигурации для приложения iOS. Эти параметры конфигурации позволяют настроить приложение в соответствии с указаниями поставщиков. Эти параметры конфигурации (ключи и значения) нужно получить от поставщика приложения. Чтобы настроить приложение, укажите параметры в виде ключей и значений или в виде содержащего их XML-файла. Кроме того, эти политики конфигурации не назначаются непосредственно пользователям и устройствам. Вы связываете их с приложением, которое впоследствии назначаете. Параметры политики конфигурации используются, когда приложение проверяет их значения (как правило, при первом запуске).

Добавив политику конфигурации приложений, вы можете задать ей назначения. Задание политики назначений позволяет включать и исключать группы пользователей, к которым будет применяться политика. Если вы захотите включить какие-то группы, то можете выбрать определенные группы для включения или встроенные группы. К встроенным группам относятся **Все пользователи**, **Все устройства** и **Все пользователи и все устройства**. 

>[!NOTE]
>В консоли Intune для вашего удобства доступны предварительно созданные группы **Все пользователи** и **Все устройства** со встроенной оптимизацией. Настоятельно рекомендуем использовать эти группы для охвата всех пользователей и всех устройств, а не создавать группы "Все пользователи" и "Все устройства" самостоятельно.<p></p>
>Администраторы Microsoft Intune могут контролировать добавление учетных записей в приложения Microsoft Office на управляемых устройствах. Вы можете ограничивать доступ только для учетных записей разрешенных организаций и блокировать личные учетные записи на зарегистрированных устройствах. Вспомогательные приложения обработают конфигурацию приложения, а затем удалят и заблокируют неутвержденные учетные записи.

После выбора групп, которые будут включены в политику конфигурации приложений, вы также можете выбрать группы, которые будут исключены. Дополнительные сведения см. в статье [Включение и исключение назначений приложений в Microsoft Intune](apps-inc-exl-assignments.md).

> [!TIP]
> Такой тип политики в настоящее время доступен только устройствам под управлением iOS 8.0 и более поздних версий. Он поддерживает следующие типы установки приложения:
>
> -   **Управляемое приложение iOS из магазина приложений**
> -   **Пакет приложений для iOS**
>
> Дополнительные сведения о типах установки приложений см. в статье [Добавление приложения в Microsoft Intune](apps-add.md).

## <a name="create-an-app-configuration-policy"></a>Создание политики конфигурации приложений

1. Войдите на [портал Azure](https://portal.azure.com).
2. Выберите **Все службы** > **Intune**. Intune находится в разделе **Мониторинг и управление**.
3. Выберите рабочую нагрузку **Клиентские приложения**.
4. В группе **Управление** выберите **Политики конфигурации приложений**, а затем нажмите кнопку **Добавить**.
5. Задайте следующие значения:
    - **Имя**. Имя профиля, которое отображается на портале Azure.
    - **Описание**. Описание профиля, которое отображается на портале Azure.
    - **Тип регистрации устройств**. Выберите **Управляемые устройства**.
6. В списке **Платформа** выберите **iOS**.
7.  Выберите **Связанное приложение**. Затем на панели **Связанное приложение** выберите управляемое приложение, к которому следует применить конфигурацию, и нажмите **OK**.
8.  На панели **Добавить политику конфигурации** выберите **Параметры конфигурации**.
9. Выберите **Формат параметров конфигурации**. Выберите один из следующих параметров для добавления XML-сведений:
    - **Использовать конструктор конфигурации**
    - **Введите данные XML**<br><br>
    Дополнительные сведения об использовании конструктора конфигураций см. в разделе [Использование конструктора конфигураций](#use-configuration-designer). Дополнительные сведения о вводе XML-данных см. в разделе [Ввод данных XML](#enter-xml-data). 
10. После добавления данных XML нажмите кнопку **ОК**, а затем выберите **Добавить**, чтобы добавить политику конфигурации. Откроется панель с общими сведениями о политике конфигурации.
11. Выберите **Назначения**, чтобы просмотреть варианты включения и исключения. 

    ![Снимок экрана: вкладка "Включить" на странице назначений политик](./media/app-config-policy01.png)
12. Выберите **Все пользователи** на вкладке **Включить**.

    ![Снимок экрана: раскрывающийся список "Назначения политик — все пользователи"](./media/app-config-policy02.png)
13. Перейдите на вкладку **Исключить**. 
14. Щелкните **Выбрать группы для исключения**, чтобы открыть соответствующую панель.

    ![Снимок экрана: колонка "Назначения политик — выбор групп для исключения"](./media/app-config-policy03.png)
15. Выберите группы, которые требуется исключить, и щелкните **Выбрать**.

    >[!NOTE]
    >Если при добавлении группы какая-то другая группа уже включена с выбранным типом назначения, этот тип станет для нее фиксированным, и выбрать для нее какой-то другой тип назначения будет невозможно. Поэтому вы не сможете исключить эту уже используемую группу.
16. Нажмите кнопку **Сохранить**.

## <a name="use-configuration-designer"></a>Использование конструктора конфигураций

Microsoft Intune предоставляет параметры конфигурации, которые являются уникальными для приложения. Конструктор конфигураций используется для приложений на устройствах, которые зарегистрированы или не зарегистрированы в Microsoft Intune. Конструктор позволяет настроить определенные ключи и значения конфигурации, помогающие задать базовый XML-код. Необходимо также указать тип данных для каждого значения. Эти параметры автоматически передаются в приложения при их установке.

### <a name="add-a-setting"></a>Добавление параметра

1. Для каждого ключа и значения в конфигурации задайте следующие параметры.
   - **Ключ конфигурации**. Этот ключ однозначно определяет настройку конкретного параметра.
   - **Тип значения**. Тип данных значения конфигурации. Доступны следующие типы: Integer, Real, String или Boolean.
   - **Значение конфигурации**. Значение для конфигурации.
2. Нажмите кнопку **ОК**, чтобы задать параметры конфигурации.

### <a name="delete-a-setting"></a>Удаление параметра

1. Нажмите кнопку с многоточием (**...**) рядом с параметром.
2. Выберите **Удалить**.

Символы \{\{ и \}\} используются только для типов токенов и не должны применяться в других целях.

### <a name="allow-only-configured-organization-accounts-in-multi-identity-apps"></a>Разрешение использовать только настроенные учетные записи организации в приложениях с несколькими удостоверениями 

Для устройств Android используйте следующие пары "ключ-значение":

| **Key** | IntuneMAMAllowedAccountsOnly |
|--------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Значения** | <ul><li>**Включено**: единственной учетной записью является управляемая пользователем учетная запись, определенная ключом [IntuneMAMUPN](data-transfer-between-apps-manage-ios.md#configure-user-upn-setting-for-microsoft-intune-or-third-party-emm).</li><li>**Отключено** (или любое значение, которое не совпадает со значением **Включено** без учета регистра): допускается любая учетная запись.</li></ul> |

   > [!NOTE]
   > Необходимо использовать OneDrive для iOS 10.34 или более поздней версии и Outlook для iOS 2.99.0 или более поздней версии, если вы разрешаете только настроенные учетные записи организации с несколькими удостоверениями.

## <a name="enter-xml-data"></a>Ввод данных XML

Введите или вставьте список свойств XML, содержащий нужные вам параметры конфигурации приложений для устройств, зарегистрированных в Intune. Формат списка свойств XML зависит от настраиваемого приложения. Для получения сведений о необходимом формате обратитесь к поставщику приложения.

Intune проверяет формат XML-файла. Но Intune не проверяет, будет ли список свойств XML работать с целевым приложением.

Дополнительные сведения о списках свойств XML.

  -  См. статью [Understand XML Property Lists](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/PropertyLists/UnderstandXMLPlist/UnderstandXMLPlist.html) (Общие сведения о списках свойств XML) в библиотеке разработчика iOS.

### <a name="example-format-for-an-app-configuration-xml-file"></a>Пример формата для XML-файла конфигурации приложения

При создании файла конфигурации приложения можно указать одно или несколько следующих значений в данном формате:

```
<dict>
  <key>userprincipalname</key>
  <string>{{userprincipalname}}</string>
  <key>mail</key>
  <string>{{mail}}</string>
  <key>partialupn</key>
  <string>{{partialupn}}</string>
  <key>accountid</key>
  <string>{{accountid}}</string>
  <key>deviceid</key>
  <string>{{deviceid}}</string>
  <key>userid</key>
  <string>{{userid}}</string>
  <key>username</key>
  <string>{{username}}</string>
  <key>serialnumber</key>
  <string>{{serialnumber}}</string>
  <key>serialnumberlast4digits</key>
  <string>{{serialnumberlast4digits}}</string>
  <key>udidlast4digits</key>
  <string>{{udidlast4digits}}</string>
  <key>aaddeviceid</key>
  <string>{{aaddeviceid}}</string>
</dict>
```
### <a name="supported-xml-plist-data-types"></a>Поддерживаемые типы данных XML PList

Intune поддерживает следующие типы данных в списке свойств:

- &lt;integer&gt;
- &lt;real&gt;
- &lt;string&gt;
- &lt;array&gt;
- &lt;dict&gt;
- &lt;true /&gt; или &lt;false /&gt;

### <a name="tokens-used-in-the-property-list"></a>Маркеры, используемые в списке свойств

Кроме того, Intune поддерживает следующие типы токенов в списке свойств:
- \{\{userprincipalname\}\} — например **John@contoso.com**
- \{\{mail\}\} — например **John@contoso.com**
- \{\{partialupn\}\} — например **John**
- \{\{accountid\}\} — например **fc0dc142-71d8-4b12-bbea-bae2a8514c81**
- \{\{deviceid\}\} — например **b9841cd9-9843-405f-be28-b2265c59ef97**
- \{\{userid\}\} — например **3ec2c00f-b125-4519-acf0-302ac3761822**
- \{\{username\}\} — например **Илья Глазков**
- \{\{serialnumber\}\} — например **F4KN99ZUG5V2** (для устройств iOS)
- \{\{serialnumberlast4digits\}\} — например **G5V2** (для устройств iOS)
- \{\{aaddeviceid\}\} — например, **ab0dc123-45d6-7e89-aabb-cde0a1234b56**

## <a name="monitor-ios--app-configuration-status-per-device"></a>Отслеживание состояния конфигурации приложений для iOS на отдельных устройствах 
После назначения политики конфигурации вы можете отслеживать состояние конфигурации приложений для iOS на каждом управляемом устройстве. В разделе **Microsoft Intune** на портале Azure выберите **Устройства** > **Все устройства**. В списке управляемых устройств выберите определенное устройство, чтобы открыть его колонку. В колонке устройства выберите элемент **Конфигурация приложения**.  

## <a name="next-steps"></a>Дальнейшие шаги

Продолжайте [назначать](apps-deploy.md) и [отслеживать](apps-monitor.md) приложение как обычно.
